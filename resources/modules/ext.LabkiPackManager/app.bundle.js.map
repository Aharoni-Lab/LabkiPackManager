{"version":3,"file":"app.bundle.js","sources":["../../src/state/store.ts","../../src/api/mwApi.ts","../../src/api/endpoints.ts","../../src/ui/AddRepoModal.vue","../../src/ui/AddRefModal.vue","../../src/ui/RepoRefSelector.vue","../../src/ui/MermaidGraph.vue","../../src/state/merge.ts","../../src/ui/TreeNode.vue","../../src/ui/HierarchyTree.vue","../../src/ui/StateSyncModal.vue","../../src/ui/DetailsPanel.vue","../../src/ui/App.vue","../../src/main.ts"],"sourcesContent":[null,null,null,"<template>\n  <cdx-dialog\n    v-model:open=\"isOpen\"\n    :title=\"$t('labkipackmanager-add-repo-title')\"\n    :primary-action=\"{\n      label: $t('labkipackmanager-add-repo-submit'),\n      actionType: 'progressive',\n      disabled: busy || !isValid\n    }\"\n    :default-action=\"{\n      label: $t('labkipackmanager-cancel')\n    }\"\n    @primary=\"onSubmit\"\n    @default=\"onCancel\"\n  >\n    <div class=\"add-repo-form\">\n      <cdx-field\n        :is-fieldset=\"false\"\n      >\n        <template #label>{{ $t('labkipackmanager-repo-url-label') }}</template>\n        <cdx-text-input\n          v-model=\"repoUrl\"\n          :placeholder=\"$t('labkipackmanager-repo-url-placeholder')\"\n          :disabled=\"busy\"\n          @update:model-value=\"validateUrl\"\n        />\n        <template v-if=\"urlError\" #help-text>\n          <span class=\"error\">{{ urlError }}</span>\n        </template>\n      </cdx-field>\n\n      <cdx-field\n        :is-fieldset=\"false\"\n      >\n        <template #label>{{ $t('labkipackmanager-default-ref-label') }}</template>\n        <cdx-text-input\n          v-model=\"defaultRef\"\n          :placeholder=\"$t('labkipackmanager-default-ref-placeholder')\"\n          :disabled=\"busy\"\n        />\n      </cdx-field>\n\n      <cdx-message\n        v-if=\"statusMessage && !error\"\n        type=\"notice\"\n        :inline=\"true\"\n      >\n        {{ statusMessage }}\n      </cdx-message>\n\n      <cdx-message\n        v-if=\"error\"\n        type=\"error\"\n        :inline=\"true\"\n      >\n        {{ error }}\n      </cdx-message>\n    </div>\n  </cdx-dialog>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue';\nimport { CdxDialog, CdxField, CdxTextInput, CdxMessage } from '@wikimedia/codex';\nimport { reposAdd, pollOperation } from '../api/endpoints';\n\nconst props = defineProps({\n  modelValue: Boolean\n});\n\nconst emit = defineEmits(['update:modelValue', 'added']);\n\nconst isOpen = computed({\n  get: () => props.modelValue,\n  set: (value) => emit('update:modelValue', value)\n});\n\nconst repoUrl = ref('');\nconst defaultRef = ref('main');\nconst urlError = ref('');\nconst error = ref('');\nconst busy = ref(false);\nconst statusMessage = ref('');\n\nconst isValid = computed(() => {\n  return repoUrl.value.trim() !== '' && defaultRef.value.trim() !== '' && !urlError.value;\n});\n\nfunction validateUrl() {\n  urlError.value = '';\n  const url = repoUrl.value.trim();\n  \n  if (!url) {\n    return;\n  }\n\n  // Basic URL validation\n  try {\n    new URL(url);\n    if (!url.match(/^(https?|git|ssh):\\/\\//)) {\n      urlError.value = mw.msg('labkipackmanager-error-invalid-protocol');\n    }\n  } catch {\n    urlError.value = mw.msg('labkipackmanager-error-invalid-url');\n  }\n}\n\nasync function onSubmit() {\n  if (!isValid.value || busy.value) {\n    return;\n  }\n\n  busy.value = true;\n  error.value = '';\n\n  try {\n    const repoUrlValue = repoUrl.value.trim();\n    const defaultRefValue = defaultRef.value.trim();\n    \n    // Step 1: Queue the job\n    statusMessage.value = 'Queueing repository initialization...';\n    const response = await reposAdd(repoUrlValue, defaultRefValue);\n    \n    console.log('[AddRepoModal] reposAdd response:', response);\n    console.log('[AddRepoModal] operation_id:', response?.operation_id);\n    \n    // Step 2: If we got an operation_id, wait for the background job to complete\n    if (response?.operation_id) {\n      console.log(`[AddRepoModal] Polling operation ${response.operation_id}...`);\n      \n      // Poll with status updates\n      await pollOperation(\n        response.operation_id, \n        60, \n        1000,\n        (status) => {\n          // Update modal message based on operation status\n          if (status.message) {\n            statusMessage.value = status.message;\n          } else if (status.status === 'queued') {\n            statusMessage.value = 'Waiting for job to start...';\n          } else if (status.status === 'running') {\n            statusMessage.value = `Initializing repository... (${status.progress || 0}%)`;\n          }\n        }\n      );\n      \n      console.log('[AddRepoModal] Operation completed successfully');\n      statusMessage.value = 'Repository initialized successfully!';\n    } else {\n      // Repo already existed\n      console.log('[AddRepoModal] No operation_id, repo may already exist');\n      statusMessage.value = 'Repository already exists';\n    }\n    \n    // Step 3: Notify parent that everything is ready\n    emit('added', {\n      repoUrl: repoUrlValue,\n      operationId: response?.operation_id || null\n    });\n    \n    // Close after a brief moment to show success message\n    await new Promise(resolve => setTimeout(resolve, 500));\n    onCancel();\n  } catch (e) {\n    console.error('[AddRepoModal] Error adding repo:', e);\n    error.value = e instanceof Error ? e.message : String(e);\n    statusMessage.value = '';\n  } finally {\n    busy.value = false;\n  }\n}\n\nfunction onCancel() {\n  repoUrl.value = '';\n  defaultRef.value = 'main';\n  urlError.value = '';\n  error.value = '';\n  statusMessage.value = '';\n  isOpen.value = false;\n}\n\n// Helper for i18n\nfunction $t(key) {\n  return mw.msg(key);\n}\n</script>\n\n<style scoped>\n.add-repo-form {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.error {\n  color: #d33;\n}\n</style>\n\n","<template>\n  <cdx-dialog\n    v-model:open=\"isOpen\"\n    :title=\"$t('labkipackmanager-add-ref-title')\"\n    :primary-action=\"{\n      label: $t('labkipackmanager-add-ref-submit'),\n      actionType: 'progressive',\n      disabled: busy || !isValid\n    }\"\n    :default-action=\"{\n      label: $t('labkipackmanager-cancel')\n    }\"\n    @primary=\"onSubmit\"\n    @default=\"onCancel\"\n  >\n    <div class=\"add-ref-form\">\n      <p class=\"repo-info\">\n        <strong>{{ $t('labkipackmanager-repository') }}:</strong> {{ repoUrl }}\n      </p>\n\n      <cdx-field\n        :is-fieldset=\"false\"\n      >\n        <template #label>{{ $t('labkipackmanager-ref-name-label') }}</template>\n        <cdx-text-input\n          v-model=\"refName\"\n          :placeholder=\"$t('labkipackmanager-ref-name-placeholder')\"\n          :disabled=\"busy\"\n        />\n      </cdx-field>\n\n      <cdx-message\n        v-if=\"statusMessage && !error\"\n        type=\"notice\"\n        :inline=\"true\"\n      >\n        {{ statusMessage }}\n      </cdx-message>\n\n      <cdx-message\n        v-if=\"error\"\n        type=\"error\"\n        :inline=\"true\"\n      >\n        {{ error }}\n      </cdx-message>\n    </div>\n  </cdx-dialog>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue';\nimport { CdxDialog, CdxField, CdxTextInput, CdxMessage } from '@wikimedia/codex';\nimport { reposAdd, pollOperation } from '../api/endpoints';\n\nconst props = defineProps({\n  modelValue: Boolean,\n  repoUrl: String\n});\n\nconst emit = defineEmits(['update:modelValue', 'added']);\n\nconst isOpen = computed({\n  get: () => props.modelValue,\n  set: (value) => emit('update:modelValue', value)\n});\n\nconst refName = ref('');\nconst error = ref('');\nconst busy = ref(false);\nconst statusMessage = ref('');\n\nconst isValid = computed(() => {\n  return refName.value.trim() !== '';\n});\n\nasync function onSubmit() {\n  if (!isValid.value || busy.value) {\n    return;\n  }\n\n  busy.value = true;\n  error.value = '';\n\n  try {\n    const refNameValue = refName.value.trim();\n    \n    // Step 1: Queue the job\n    statusMessage.value = 'Queueing ref initialization...';\n    const response = await reposAdd(props.repoUrl, refNameValue);\n    \n    console.log('[AddRefModal] reposAdd response:', response);\n    console.log('[AddRefModal] Response keys:', Object.keys(response || {}));\n    console.log('[AddRefModal] operation_id:', response?.operation_id);\n    console.log('[AddRefModal] labkiReposAdd:', response?.labkiReposAdd);\n    \n    // Step 2: If we got an operation_id, wait for the background job to complete\n    if (response?.operation_id) {\n      console.log(`[AddRefModal] Polling operation ${response.operation_id}...`);\n      \n      // Poll with status updates\n      await pollOperation(\n        response.operation_id, \n        60, \n        1000,\n        (status) => {\n          // Update modal message based on operation status\n          if (status.message) {\n            statusMessage.value = status.message;\n          } else if (status.status === 'queued') {\n            statusMessage.value = 'Waiting for job to start...';\n          } else if (status.status === 'running') {\n            statusMessage.value = `Creating worktree... (${status.progress || 0}%)`;\n          }\n        }\n      );\n      \n      console.log('[AddRefModal] Operation completed successfully');\n      statusMessage.value = 'Ref initialized successfully!';\n    } else {\n      // Ref already existed\n      console.log('[AddRefModal] No operation_id, ref may already exist');\n      statusMessage.value = 'Ref already exists';\n    }\n    \n    // Step 3: Notify parent that everything is ready\n    emit('added', {\n      refName: refNameValue,\n      operationId: response?.operation_id || null\n    });\n    \n    // Close after a brief moment to show success message\n    await new Promise(resolve => setTimeout(resolve, 500));\n    onCancel();\n  } catch (e) {\n    console.error('[AddRefModal] Error adding ref:', e);\n    error.value = e instanceof Error ? e.message : String(e);\n    statusMessage.value = '';\n  } finally {\n    busy.value = false;\n  }\n}\n\nfunction onCancel() {\n  refName.value = '';\n  error.value = '';\n  statusMessage.value = '';\n  isOpen.value = false;\n}\n\n// Helper for i18n\nfunction $t(key) {\n  return mw.msg(key);\n}\n</script>\n\n<style scoped>\n.add-ref-form {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.repo-info {\n  padding: 8px 12px;\n  background: #f8f9fa;\n  border-radius: 4px;\n  margin: 0;\n}\n</style>\n\n","<template>\n  <div class=\"repo-ref-selector\">\n    <h2>{{ $t('labkipackmanager-select-source') }}</h2>\n    \n    <div class=\"selector-row\" style=\"display: flex; gap: 24px; flex-wrap: nowrap;\">\n      <div class=\"selector-field\" style=\"flex: 1 1 0; min-width: 0;\">\n        <cdx-field>\n          <template #label>{{ $t('labkipackmanager-repo-selector-label') }}</template>\n          <cdx-select\n            v-model:selected=\"selectedRepoUrl\"\n            :menu-items=\"repoMenuItems\"\n            :disabled=\"store.busy\"\n            @update:selected=\"onRepoSelected\"\n          />\n        </cdx-field>\n      </div>\n      \n      <div class=\"selector-field\" style=\"flex: 1 1 0; min-width: 0;\">\n        <cdx-field>\n          <template #label>{{ $t('labkipackmanager-ref-selector-label') }}</template>\n          <cdx-select\n            v-model:selected=\"selectedRefName\"\n            :menu-items=\"refMenuItems\"\n            :disabled=\"store.busy || !selectedRepoUrl\"\n            @update:selected=\"onRefSelected\"\n          />\n        </cdx-field>\n      </div>\n    </div>\n    \n    <div v-if=\"selectedRepoUrl && selectedRefName\" class=\"current-selection\">\n      <strong>{{ $t('labkipackmanager-current-selection') }}:</strong>\n      {{ selectedRepoUrl }} @ {{ selectedRefName }}\n    </div>\n    \n    <div v-if=\"selectedRepoUrl\" class=\"sync-section\">\n      <cdx-button\n        action=\"progressive\"\n        weight=\"quiet\"\n        :disabled=\"store.busy || syncInProgress\"\n        @click=\"onSync\"\n      >\n        üîÑ {{ $t('labkipackmanager-sync-from-remote') }}\n      </cdx-button>\n    </div>\n    \n    <cdx-message v-if=\"syncMessage\" type=\"success\" :inline=\"true\">\n      {{ syncMessage }}\n    </cdx-message>\n    \n    <cdx-message v-if=\"error\" type=\"error\" :inline=\"true\">\n      {{ error }}\n    </cdx-message>\n    \n    <add-repo-modal\n      v-model=\"showAddRepoModal\"\n      @added=\"onRepoAdded\"\n    />\n    \n    <add-ref-modal\n      v-model=\"showAddRefModal\"\n      :repo-url=\"selectedRepoUrl\"\n      @added=\"onRefAdded\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue';\nimport { CdxField, CdxSelect, CdxMessage, CdxButton } from '@wikimedia/codex';\nimport { store } from '../state/store';\nimport { reposList, reposSync, graphGet, hierarchyGet, packsAction, pollOperation } from '../api/endpoints';\nimport AddRepoModal from './AddRepoModal.vue';\nimport AddRefModal from './AddRefModal.vue';\n\nconst ADD_REPO_VALUE = '__add_new_repo__';\nconst ADD_REF_VALUE = '__add_new_ref__';\n\nconst selectedRepoUrl = ref('');\nconst selectedRefName = ref('');\nconst showAddRepoModal = ref(false);\nconst showAddRefModal = ref(false);\nconst error = ref('');\nconst syncMessage = ref('');\nconst syncInProgress = ref(false);\n\nconst repoMenuItems = computed(()  => {\n  console.log('Computing repoMenuItems, store.repos:', store.repos);\n  \n  if (!store.repos || store.repos.length === 0) {\n    return [{\n      label: 'Loading...',\n      value: '',\n      disabled: true\n    }];\n  }\n  \n  const items = store.repos.map(repo => ({\n    label: repo.repo_url,\n    value: repo.repo_url,\n  }));\n  \n  // Add separator and \"Add new\" option\n  items.push({\n    label: '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ',\n    value: '__separator__',\n    disabled: true,\n  });\n  items.push({\n    label: $t('labkipackmanager-add-repo-option'),\n    value: ADD_REPO_VALUE,\n  });\n  \n  return items;\n});\n\nconst refMenuItems = computed(()  => {\n  if (!store.selectedRepo) {\n    return [];\n  }\n  \n  const items = store.selectedRepo.refs.map(ref => ({\n    label: `${ref.ref_name} ${ref.is_default ? '(default)' : ''}`,\n    value: ref.ref,\n  }));\n  \n  // Add separator and \"Add new\" option\n  items.push({\n    label: '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ',\n    value: '__separator__',\n    disabled: true,\n  });\n  items.push({\n    label: $t('labkipackmanager-add-ref-option'),\n    value: ADD_REF_VALUE,\n  });\n  \n  return items;\n});\n\nonMounted(async () => {\n  console.log('RepoRefSelector mounted, store:', store);\n  await loadRepos();\n});\n\nasync function loadRepos() {\n  try {\n    console.log('[loadRepos] Starting...');\n    store.busy = true;\n    error.value = '';\n    console.log('[loadRepos] Calling reposList API...');\n    const response = await reposList();\n    console.log('[loadRepos] API response received:', response);\n    \n    if (!response) {\n      throw new Error('No response from reposList API');\n    }\n    \n    if (!response.repos) {\n      throw new Error('Invalid response structure - no repos field. Response: ' + JSON.stringify(response));\n    }\n    \n    console.log('[loadRepos] Setting store.repos:', response.repos);\n    store.repos = response.repos;\n    console.log('[loadRepos] store.repos is now:', store.repos);\n    console.log('[loadRepos] store.repos.length:', store.repos.length);\n    \n    // Auto-select first repo if available\n    if (store.repos.length > 0 && !selectedRepoUrl.value) {\n      console.log('[loadRepos] Auto-selecting first repo:', store.repos[0].repo_url);\n      await selectRepo(store.repos[0].repo_url);\n    }\n  } catch (e) {\n    console.error('[loadRepos] Error:', e);\n    error.value = e instanceof Error ? e.message : String(e);\n  } finally {\n    store.busy = false;\n    console.log('[loadRepos] Finished. store.busy:', store.busy, 'store.repos:', store.repos);\n  }\n}\n\nasync function onRepoSelected(value) {\n  if (value === ADD_REPO_VALUE) {\n    showAddRepoModal.value = true;\n    // Reset selection\n    selectedRepoUrl.value = store.repoUrl;\n    return;\n  }\n  \n  if (typeof value === 'string' && value && value !== '__separator__') {\n    await selectRepo(value);\n  }\n}\n\nasync function selectRepo(url) {\n  try {\n    store.busy = true;\n    error.value = '';\n    \n    selectedRepoUrl.value = url;\n    store.repoUrl = url;\n    \n    // Find repo object\n    const repo = store.repos.find(r => r.repo_url === url);\n    if (!repo) {\n      throw new Error($t('labkipackmanager-error-repo-not-found'));\n    }\n    \n    store.selectedRepo = repo;\n    \n    // Auto-select default ref\n    const defaultRefObj = repo.refs.find(r => r.is_default);\n    const defaultRef = defaultRefObj?.ref || repo.refs[0]?.ref;\n    \n    if (defaultRef) {\n      await selectRef(defaultRef);\n    }\n  } catch (e) {\n    error.value = e instanceof Error ? e.message : String(e);\n  } finally {\n    store.busy = false;\n  }\n}\n\nasync function onRefSelected(value) {\n  if (value === ADD_REF_VALUE) {\n    showAddRefModal.value = true;\n    // Reset selection\n    selectedRefName.value = store.ref;\n    return;\n  }\n  \n  if (typeof value === 'string' && value && value !== '__separator__') {\n    await selectRef(value);\n  }\n}\n\nasync function selectRef(refName) {\n  try {\n    store.busy = true;\n    error.value = '';\n    \n    selectedRefName.value = refName;\n    store.ref = refName;\n    \n    // IMPORTANT: Reset packs state before init\n    // The init command on backend returns full state, and frontend must start empty\n    store.packs = {};\n    store.warnings = [];\n    \n    // Fetch graph and hierarchy\n    const [graphResponse, hierarchyResponse] = await Promise.all([\n      graphGet(store.repoUrl, store.ref),\n      hierarchyGet(store.repoUrl, store.ref),\n    ]);\n    \n    // Build mermaid source from graph\n    store.mermaidSrc = buildMermaidFromGraph(graphResponse.graph);\n    store.hierarchy = hierarchyResponse.hierarchy;\n    \n    // Initialize pack state\n    const initResponse = await packsAction({\n      command: 'init',\n      repo_url: store.repoUrl,\n      ref: store.ref,\n      data: {},\n    });\n    \n    // On init, diff contains full state\n    store.packs = initResponse.diff;\n    store.stateHash = initResponse.state_hash;\n    store.warnings = initResponse.warnings;\n  } catch (e) {\n    error.value = e instanceof Error ? e.message : String(e);\n  } finally {\n    store.busy = false;\n  }\n}\n\nasync function onRepoAdded(eventData) {\n  // The repo was added and the modal already waited for completion\n  // Now we just need to reload and select it\n  try {\n    store.busy = true;\n    error.value = '';\n    \n    const { repoUrl } = eventData;\n    \n    console.log(`[onRepoAdded] Repo '${repoUrl}' initialized, reloading repos and selecting...`);\n    \n    // Reload repos to get the updated repo list\n    await loadRepos();\n    \n    // Select the newly added repo\n    await selectRepo(repoUrl);\n    \n    console.log('[onRepoAdded] Repo selected successfully');\n    \n  } catch (e) {\n    console.error('[onRepoAdded] Error:', e);\n    error.value = e instanceof Error ? e.message : String(e);\n  } finally {\n    store.busy = false;\n  }\n}\n\nasync function onRefAdded(eventData) {\n  // The ref was added and the modal already waited for completion\n  // Now we just need to reload and select it\n  try {\n    store.busy = true;\n    error.value = '';\n    \n    const { refName } = eventData;\n    \n    console.log(`[onRefAdded] Ref '${refName}' initialized, reloading repos and selecting...`);\n    \n    // Reload repos to get the updated ref list\n    await loadRepos();\n    \n    // Re-select the current repo to refresh store.selectedRepo with the new ref\n    // This is needed because store.selectedRepo still points to the old repo object\n    if (selectedRepoUrl.value) {\n      await selectRepo(selectedRepoUrl.value);\n    }\n    \n    // Select the newly added ref\n    await selectRef(refName);\n    \n    console.log('[onRefAdded] Ref selected successfully');\n    \n  } catch (e) {\n    console.error('[onRefAdded] Error:', e);\n    error.value = e instanceof Error ? e.message : String(e);\n  } finally {\n    store.busy = false;\n  }\n}\n\nasync function onSync() {\n  if (store.busy || syncInProgress.value) return;\n  \n  try {\n    syncInProgress.value = true;\n    syncMessage.value = '';\n    error.value = '';\n    \n    console.log(`[onSync] Syncing repository ${selectedRepoUrl.value}`);\n    \n    // Step 1: Queue sync operation\n    syncMessage.value = 'Syncing from remote repository...';\n    const response = await reposSync(selectedRepoUrl.value);\n    \n    console.log('[onSync] Sync response:', response);\n    \n    // Step 2: If we got an operation_id, poll for completion\n    if (response.operation_id) {\n      const operationId = response.operation_id;\n      console.log(`[onSync] Polling operation ${operationId}...`);\n      \n      // Poll with status updates\n      await pollOperation(\n        operationId,\n        120, // 2 minutes max\n        1000,\n        (status) => {\n          // Update message based on operation status\n          if (status.message) {\n            syncMessage.value = status.message;\n          } else if (status.status === 'queued') {\n            syncMessage.value = 'Waiting for sync to start...';\n          } else if (status.status === 'running') {\n            syncMessage.value = `Syncing... (${status.progress || 0}%)`;\n          }\n        }\n      );\n      \n      console.log('[onSync] Sync completed successfully');\n      syncMessage.value = 'Repository synced successfully! Reloading...';\n      \n      // Reload the current ref to get latest data\n      if (selectedRefName.value) {\n        await selectRef(selectedRefName.value);\n      }\n      \n      syncMessage.value = 'Repository synced and refreshed!';\n      \n      // Clear message after delay\n      setTimeout(() => {\n        syncMessage.value = '';\n      }, 3000);\n    } else {\n      syncMessage.value = 'Repository synced!';\n      setTimeout(() => {\n        syncMessage.value = '';\n      }, 3000);\n    }\n  } catch (e) {\n    console.error('[onSync] Error:', e);\n    error.value = e instanceof Error ? e.message : String(e);\n    syncMessage.value = '';\n  } finally {\n    syncInProgress.value = false;\n  }\n}\n\nfunction buildMermaidFromGraph(graph) {\n  const lines = ['graph TD'];\n  \n  // Create node definitions first\n  const nodes = new Set();\n  const edges = [];\n  \n  // Collect all nodes from edges\n  for (const edge of graph.containsEdges || []) {\n    nodes.add(edge.from);\n    nodes.add(edge.to);\n    edges.push({ from: edge.from, to: edge.to, type: 'contains' });\n  }\n  \n  for (const edge of graph.dependsEdges || []) {\n    nodes.add(edge.from);\n    nodes.add(edge.to);\n    edges.push({ from: edge.from, to: edge.to, type: 'depends' });\n  }\n  \n  // Add node definitions with labels\n  // Backend now provides prefixed names like \"pack:People\" and \"page:People\"\n  for (const node of nodes) {\n    const nodeId = escapeNodeName(node);\n    // Extract the display name and icon from the prefixed node name\n    const [prefix, ...nameParts] = node.split(':');\n    const displayName = nameParts.join(':'); // rejoin in case name has colons\n    const icon = prefix === 'page' ? 'üìÑ' : 'üì¶';\n    lines.push(`  ${nodeId}[\"${icon} ${displayName}\"]`);\n  }\n  \n  // Add edges\n  for (const edge of edges) {\n    const fromNode = escapeNodeName(edge.from);\n    const toNode = escapeNodeName(edge.to);\n    if (edge.type === 'depends') {\n      lines.push(`  ${fromNode} -.-> ${toNode}`);\n    } else {\n      lines.push(`  ${fromNode} --> ${toNode}`);\n    }\n  }\n  \n  const mermaidSrc = lines.join('\\n');\n  console.log('[buildMermaidFromGraph] Generated Mermaid syntax:\\n', mermaidSrc);\n  return mermaidSrc;\n}\n\nfunction escapeNodeName(name) {\n  // Replace spaces and special chars with underscores\n  return name.replace(/[^a-zA-Z0-9_]/g, '_');\n}\n\n// Helper for i18n\nfunction $t(key) {\n  return mw.msg(key);\n}\n</script>\n\n<style scoped>\n.repo-ref-selector {\n  padding: 20px;\n  background: white;\n  border: 1px solid #c8ccd1;\n  border-radius: 8px;\n  margin-bottom: 20px;\n}\n\nh2 {\n  margin-top: 0;\n  margin-bottom: 16px;\n  font-size: 1.4em;\n}\n\n.selector-row {\n  display: flex !important;\n  flex-wrap: nowrap !important;\n  gap: 24px;\n  align-items: flex-start;\n  width: 100%;\n}\n\n.selector-field {\n  flex: 1 1 0 !important;\n  min-width: 0 !important;\n  width: auto !important;\n}\n\n/* Make the cdx-field fill its wrapper but not force line breaks */\n.selector-field :deep(.cdx-field) {\n  width: 100% !important;\n  margin: 0 !important;\n  display: block !important;\n}\n\n.current-selection {\n  padding: 12px;\n  background: #eaf3ff;\n  border-radius: 4px;\n  font-size: 0.95em;\n  margin-bottom: 12px;\n}\n\n.sync-section {\n  margin-bottom: 16px;\n}\n\n.sync-section :deep(.cdx-button) {\n  border-radius: 6px;\n  font-weight: 600;\n  transition: all 0.2s ease;\n}\n\n.sync-section :deep(.cdx-button:hover:not(:disabled)) {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n}\n\n@media (max-width: 768px) {\n  .selector-row {\n    flex-direction: column;\n  }\n}\n</style>\n","<template>\n  <div class=\"mermaid-graph-container\">\n    <h3>{{ $t('labkipackmanager-graph-title') }}</h3>\n    \n    <div v-if=\"!hasMermaid\" class=\"no-mermaid-message\">\n      <cdx-message type=\"warning\" :inline=\"true\">\n        {{ $t('labkipackmanager-mermaid-not-installed') }}\n      </cdx-message>\n    </div>\n    \n    <div v-else-if=\"mermaidSrc\" class=\"mermaid-wrapper\">\n      <pre class=\"mermaid\" ref=\"mermaidPre\">{{ mermaidSrc }}</pre>\n    </div>\n    \n    <div v-else class=\"no-graph-message\">\n      <p>{{ $t('labkipackmanager-no-graph-loaded') }}</p>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch, nextTick } from 'vue';\nimport { CdxMessage } from '@wikimedia/codex';\n\nconst props = defineProps({\n  mermaidSrc: String\n});\n\nconst hasMermaid = ref(false);\nconst mermaidPre = ref(null);\n\nonMounted(() => {\n  checkMermaidAvailability();\n});\n\nwatch(() => props.mermaidSrc, async () => {\n  if (hasMermaid.value && props.mermaidSrc) {\n    // Wait for Vue to update the DOM\n    await nextTick();\n    // Then trigger Mermaid to render the new content\n    triggerMermaidRender();\n  }\n});\n\nfunction checkMermaidAvailability() {\n  // Check if Mermaid extension module is available\n  const state = mw.loader.getState('ext.mermaid');\n  hasMermaid.value = state === 'ready' || state === 'loaded' || state === 'loading';\n  \n  if (!hasMermaid.value) {\n    console.warn('Mermaid extension is not available');\n  } else {\n    console.log('[MermaidGraph] Mermaid extension is available, state:', state);\n  }\n}\n\nfunction triggerMermaidRender() {\n  console.log('[MermaidGraph] Triggering Mermaid render');\n  \n  // Try to access the mermaid global if available\n  if (typeof window !== 'undefined' && window.mermaid) {\n    try {\n      // First, try to initialize/reset mermaid state\n      if (typeof window.mermaid.initialize === 'function') {\n        console.log('[MermaidGraph] Calling mermaid.initialize()');\n        window.mermaid.initialize({ \n          startOnLoad: false,\n          theme: 'forest',\n          securityLevel: 'loose'\n        });\n      }\n      \n      // Remove any previously rendered SVG inside the pre element\n      if (mermaidPre.value) {\n        const svgs = mermaidPre.value.querySelectorAll('svg');\n        svgs.forEach(svg => svg.remove());\n        console.log('[MermaidGraph] Removed', svgs.length, 'existing SVG(s)');\n        \n        // Reset the pre element's HTML to just the text (remove any data attributes mermaid added)\n        mermaidPre.value.innerHTML = props.mermaidSrc;\n        mermaidPre.value.removeAttribute('data-processed');\n      }\n      \n      // Add a small delay to ensure DOM has fully updated\n      setTimeout(() => {\n        console.log('[MermaidGraph] Attempting to render mermaid diagrams');\n        \n        // Try different methods to trigger rendering\n        if (typeof window.mermaid.run === 'function') {\n          window.mermaid.run();\n          console.log('[MermaidGraph] Called mermaid.run()');\n        } else if (typeof window.mermaid.contentLoaded === 'function') {\n          window.mermaid.contentLoaded();\n          console.log('[MermaidGraph] Called mermaid.contentLoaded()');\n        }\n      }, 100);\n    } catch (e) {\n      console.error('[MermaidGraph] Failed to trigger mermaid render:', e);\n    }\n  } else {\n    console.warn('[MermaidGraph] window.mermaid not available');\n  }\n}\n\n// Helper for i18n\nfunction $t(key) {\n  return mw.msg(key);\n}\n</script>\n\n<style scoped>\n.mermaid-graph-container {\n  margin: 20px 0;\n  padding: 20px;\n  background: #f8f9fa;\n  border-radius: 8px;\n}\n\nh3 {\n  margin-top: 0;\n  margin-bottom: 16px;\n  font-size: 1.2em;\n}\n\n.no-mermaid-message,\n.no-graph-message {\n  padding: 16px;\n  text-align: center;\n}\n\n.no-graph-message p {\n  margin: 0;\n  color: #72777d;\n}\n\n.ext-mermaid {\n  margin: 16px 0;\n  min-height: 200px;\n}\n</style>\n\n",null,"<template>\n  <!--\n    ============================================================================\n    TREE NODE LAYOUT - CARD-BASED NESTING WITH INLINE STYLES\n    ============================================================================\n    \n    üéØ CRITICAL SUCCESS FACTORS - WHY THIS WORKS:\n    \n    1. **INLINE STYLES ARE REQUIRED** - CSS classes were NOT working due to:\n       - MediaWiki/Codex CSS has extremely high specificity\n       - External stylesheets were being overridden\n       - Inline styles have highest specificity and can't be overridden\n       - ‚úÖ Use :style=\"\" binding in template for all visual styling\n       - ‚ùå DO NOT rely on CSS classes alone for layout/colors\n    \n    2. **CHILDREN MUST BE INSIDE PACK-CARD** - This creates true nesting:\n       - The .pack-card div wraps the entire pack (row + meta + children)\n       - Children render INSIDE their parent's card, not as siblings\n       - This creates the \"recursive card nesting\" visual effect\n       - Each nested pack gets its own card INSIDE the parent card\n    \n    3. **INDENTATION** - Applied via inline paddingLeft on .node-row:\n       - Formula: `paddingLeft: ${depth * 24}px`\n       - depth=0: 0px, depth=1: 24px, depth=2: 48px, etc.\n       - Applied to .node-row, NOT the .pack-card wrapper\n    \n    4. **COLOR CODING** - Inline background colors based on state:\n       - Installed: #e8f0f8 (blue)\n       - Install action: #e8f5e9 (green)\n       - Remove action: #ffebee (red)\n       - Update action: #fff8e1 (yellow)\n       - Default: #ffffff (white)\n    \n    5. **VISUAL HIERARCHY**:\n       - Border: 2px solid creates clear card boundaries\n       - Border-radius: 8px for rounded corners\n       - Box-shadow: 0 2px 4px rgba() for depth\n       - Padding: 12px inside cards for breathing room\n       - Margin-bottom: 12px between cards\n    \n    ‚ö†Ô∏è MAINTENANCE NOTES:\n    - If visual changes don't appear, check if inline styles are present\n    - CSS classes are kept for semantic purposes but don't control layout\n    - Any layout-critical styling MUST be in :style=\"\" bindings\n    - Test changes by checking if inline styles render in browser DevTools\n    \n    ============================================================================\n  -->\n  <div\n    class=\"tree-node\"\n    :class=\"{ 'is-pack': node.type === 'pack', 'is-page': node.type === 'page' }\"\n    :data-type=\"node.type\"\n    :data-action=\"packState?.action || pageParentAction\"\n    :data-installed=\"node.type === 'pack' ? packState?.installed : pageState?.installed\"\n  >\n      <!-- \n        PACK CARD WRAPPER - Creates rounded rectangle container\n        ‚ö†Ô∏è INLINE STYLES REQUIRED: CSS classes don't work due to MW/Codex specificity\n        - Border creates card boundary\n        - Background color shows state: blue=installed, green=install, red=remove, yellow=update\n        - Children render INSIDE this div for proper nesting\n      -->\n      <div \n        v-if=\"node.type === 'pack'\" \n        class=\"pack-card\" \n        :data-depth=\"depth\"\n        :style=\"{\n          border: '2px solid #c8ccd1',           /* Card boundary */\n          borderRadius: '8px',                   /* Rounded corners */\n          padding: '10px',                       /* Breathing room inside card */\n          marginBottom: '8px',                   /* Space between cards */\n          background: packState?.installed ? '#e8f0f8' :        /* Blue = installed */\n                      packState?.action === 'install' ? '#e8f5e9' :  /* Green = install */\n                      packState?.action === 'remove' ? '#ffebee' :   /* Red = remove */\n                      packState?.action === 'update' ? '#fff8e1' :   /* Yellow = update */\n                      '#ffffff',                                      /* White = default */\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)' /* Depth/elevation effect */\n        }\"\n      >\n        <!-- \n          TWO-COLUMN LAYOUT: Pack info on left, Pages on right\n          ‚ö†Ô∏è Main content area splits into left (pack) and right (pages)\n        -->\n        <div class=\"pack-content-wrapper\" :style=\"{\n          display: 'flex',\n          gap: '12px',\n          alignItems: 'flex-start'\n        }\">\n          <!-- LEFT COLUMN: Pack info and actions -->\n          <div class=\"pack-info-column\" :style=\"{\n            flex: childPages.length > 0 ? '0 1 auto' : '1',\n            minWidth: '0',\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '8px'\n          }\">\n            <!-- Pack header row -->\n            <div class=\"node-row\" :style=\"{ \n              paddingLeft: `${depth * 24}px`,\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px',\n              flexWrap: 'nowrap'\n            }\">\n              <!-- Toggle arrow -->\n              <button\n                v-if=\"childPacks.length > 0\"\n                class=\"toggle\"\n                :aria-expanded=\"expanded.toString()\"\n                :aria-label=\"expanded ? $t('labkipackmanager-collapse') : $t('labkipackmanager-expand')\"\n                @click=\"toggleExpanded\"\n              >\n                {{ expanded ? '‚ñº' : '‚ñ∂' }}\n              </button>\n              <span v-else class=\"toggle-spacer\"></span>\n\n              <!-- Icon -->\n              <span class=\"node-icon\">üì¶</span>\n              \n              <!-- Name and badges -->\n              <span class=\"name-section\">\n                <strong class=\"label\" :title=\"node.label\">{{ node.label }}</strong>\n                \n                <span v-if=\"node.version\" class=\"badge version\">v{{ node.version }}</span>\n                \n                <span\n                  v-if=\"packState && packState.action && packState.action !== 'unchanged'\"\n                  class=\"badge\"\n                  :class=\"packState.auto_selected_reason ? 'auto' : 'manual'\"\n                  :title=\"packState.auto_selected_reason || ''\"\n                >\n                  {{ packState.auto_selected_reason ? 'Auto' : 'Manual' }}\n                </span>\n                \n                <span v-if=\"canUpdate\" class=\"badge update\">Update Available</span>\n              </span>\n            </div>\n            \n            <!-- Pack: Inline prefix editor (on second row) -->\n            <div v-if=\"showPackEditor\" :style=\"{ \n              paddingLeft: `${depth * 24 + 32}px`,\n              display: 'flex',\n              alignItems: 'center',\n              gap: '6px'\n            }\">\n              <span class=\"prefix-label\" :style=\"{ fontSize: '0.75em', color: '#72777d', fontWeight: '600' }\">Prefix:</span>\n              <input\n                class=\"prefix-input\"\n                type=\"text\"\n                :value=\"prefixInputValue\"\n                :placeholder=\"$t('labkipackmanager-pack-prefix-placeholder') || 'MyNamespace/MyPack'\"\n                :disabled=\"!isPackEditable\"\n                :readonly=\"!isPackEditable\"\n                :data-pack-name=\"node.label\"\n                @input=\"onPrefixChange\"\n                :style=\"{\n                  fontSize: '0.72em',\n                  padding: '4px 7px',\n                  minWidth: '150px',\n                  border: '1px solid #c8ccd1',\n                  borderRadius: '3px',\n                  background: 'white',\n                  fontFamily: 'Monaco, Menlo, Consolas, monospace',\n                  transition: 'all 0.15s ease',\n                  cursor: isPackEditable ? 'text' : 'not-allowed'\n                }\"\n              />\n            </div>\n\n            <!-- Actions (for packs only) - on third row -->\n            <div class=\"actions\" :style=\"{\n              paddingLeft: `${depth * 24 + 32}px`,\n              display: 'flex',\n              gap: '8px',\n              flexWrap: 'wrap'\n            }\">\n              <div class=\"action-item\" v-if=\"packState && packState.current_version === null\">\n                <cdx-button\n                  action=\"progressive\"\n                  :weight=\"packState.action === 'install' ? 'primary' : 'normal'\"\n                  :class=\"{ active: packState.action === 'install' }\"\n                  @click=\"toggleInstall\"\n                >\n                  {{ packState.action === 'install' ? '‚úì ' : '' }}{{ $t('labkipackmanager-select') }}\n                </cdx-button>\n              </div>\n\n              <div class=\"action-item\" v-if=\"canUpdate\">\n                <cdx-button\n                  :weight=\"packState?.action === 'update' ? 'primary' : 'normal'\"\n                  :class=\"{ active: packState?.action === 'update' }\"\n                  @click=\"toggleUpdate\"\n                >\n                  {{ packState?.action === 'update' ? '‚úì ' : '' }}{{ $t('labkipackmanager-update') }}\n                </cdx-button>\n              </div>\n\n              <div class=\"action-item\" v-if=\"packState && packState.current_version !== null\">\n                <cdx-button\n                  action=\"destructive\"\n                  :weight=\"packState.action === 'remove' ? 'primary' : 'normal'\"\n                  :class=\"{ active: packState.action === 'remove' }\"\n                  @click=\"toggleRemove\"\n                >\n                  {{ packState.action === 'remove' ? '‚úì ' : '' }}{{ $t('labkipackmanager-remove') }}\n                </cdx-button>\n              </div>\n            </div>\n          </div>\n          \n          <!-- RIGHT COLUMN: Pages list (if any) -->\n          <div v-if=\"childPages.length > 0\" class=\"pages-column\" :style=\"{\n            flex: '1',\n            minWidth: '250px',\n            maxWidth: '400px',\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '4px',\n            padding: '6px',\n            background: 'rgba(248, 249, 250, 0.3)',\n            borderRadius: '6px',\n            border: '1px solid #eaecf0'\n          }\">\n            <div :style=\"{ \n              fontSize: '0.7em', \n              color: '#72777d', \n              fontWeight: '700',\n              textTransform: 'uppercase',\n              letterSpacing: '0.5px',\n              marginBottom: '2px',\n              paddingLeft: '4px'\n            }\">\n              üìÑ Pages ({{ childPages.length }})\n            </div>\n            \n            <!-- Each page as a row with rename input -->\n            <div \n              v-for=\"page in childPages\"\n              :key=\"page.id\"\n              class=\"page-row-inline\"\n              :style=\"{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '6px',\n                padding: '4px 6px',\n                background: getPageBackground(page.label),\n                borderRadius: '4px',\n                border: '1px solid #eaecf0',\n                minHeight: '32px'\n              }\"\n            >\n              <span :style=\"{ \n                fontSize: '0.8em', \n                color: '#202122',\n                fontWeight: '500',\n                minWidth: '60px',\n                maxWidth: '80px',\n                overflow: 'hidden',\n                textOverflow: 'ellipsis',\n                whiteSpace: 'nowrap'\n              }\" :title=\"page.label\">{{ page.label }}</span>\n              \n              <!-- Page rename editor (show if pack is selected for install/update or installed) -->\n              <span v-if=\"showPackEditor\" class=\"page-rename-inline\" :style=\"{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '3px',\n                flex: '1',\n                minWidth: '0'\n              }\">\n                <span class=\"arrow\" :style=\"{ color: '#72777d', fontSize: '0.8em' }\">‚Üí</span>\n                <span v-if=\"getDisplayPrefix(page.label)\" class=\"prefix-chip-inline\" :style=\"{\n                  fontSize: '0.7em',\n                  padding: '3px 6px',\n                  background: '#f0f0f0',\n                  border: '1px solid #c8ccd1',\n                  borderRight: 'none',\n                  borderRadius: '3px 0 0 3px',\n                  color: '#54595d',\n                  whiteSpace: 'nowrap',\n                  fontFamily: 'Monaco, Menlo, Consolas, monospace'\n                }\">{{ getDisplayPrefixWithSlash(page.label) }}</span>\n                <input\n                  class=\"page-input\"\n                  :class=\"{ 'has-collision': getPageHasCollision(page.label) }\"\n                  type=\"text\"\n                  :value=\"getPageEditableTitle(page.label)\"\n                  :placeholder=\"$t('labkipackmanager-page-title-placeholder') || 'PageTitle'\"\n                  :disabled=\"!getPageEditable(page.label)\"\n                  :readonly=\"!getPageEditable(page.label)\"\n                  :data-pack-name=\"node.label\"\n                  :data-page-name=\"page.label\"\n                  @input=\"(e) => onPageTitleChangeForPage(e, page.label)\"\n                  :aria-invalid=\"getPageHasCollision(page.label) ? 'true' : 'false'\"\n                  :style=\"{\n                    fontSize: '0.72em',\n                    padding: '4px 7px',\n                    flex: '1',\n                    minWidth: '100px',\n                    border: getPageHasCollision(page.label) ? '1px solid #d33' : '1px solid #c8ccd1',\n                    borderRadius: getDisplayPrefix(page.label) ? '0 3px 3px 0' : '3px',\n                    background: getPageHasCollision(page.label) ? '#fff5f5' : 'white',\n                    fontFamily: 'Monaco, Menlo, Consolas, monospace',\n                    transition: 'all 0.15s ease',\n                    cursor: getPageEditable(page.label) ? 'text' : 'not-allowed'\n                  }\"\n                />\n                <span v-if=\"getPageHasCollision(page.label)\" class=\"collision-icon\" :style=\"{ \n                  fontSize: '1.1em', \n                  cursor: 'help',\n                  color: '#d33'\n                }\" :id=\"getCollisionId(page.label)\" :title=\"getCollisionTooltip(page.label)\">‚ö†Ô∏è</span>\n              </span>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Description and dependencies below both columns -->\n        \n        <!-- Description and dependencies on second row if present -->\n        <div v-if=\"node.description || node.depends_on?.length\" class=\"meta-row\" :style=\"{\n          marginTop: '6px',\n          paddingLeft: '32px',\n          paddingTop: '6px',\n          borderTop: '1px solid #eaecf0'\n        }\">\n          <div class=\"meta-content\" :style=\"{\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '3px'\n          }\">\n            <div v-if=\"node.description\" class=\"desc\" :style=\"{\n              fontSize: '0.85em',\n              color: '#54595d',\n              lineHeight: '1.4'\n            }\">{{ node.description }}</div>\n            <div v-if=\"node.depends_on?.length\" class=\"depends\" :style=\"{\n              fontSize: '0.8em',\n              color: '#72777d'\n            }\">\n              <small>{{ $t('labkipackmanager-depends-on') }}: {{ node.depends_on.join(', ') }}</small>\n            </div>\n          </div>\n        </div>\n\n        <!-- \n          NESTED PACKS CONTAINER - Only renders nested PACKS (pages shown inline above)\n          ‚ö†Ô∏è This is what creates the \"recursive card nesting\" effect\n          - Children are inside the .pack-card div, not siblings\n          - Each child pack creates its own card, nested inside this one\n          - Visual indentation via left border + paddingLeft\n        -->\n        <transition\n          name=\"children\"\n          @enter=\"onChildrenEnter\"\n          @leave=\"onChildrenLeave\"\n        >\n          <div\n            v-if=\"expanded && childPacks.length > 0\"\n            class=\"children\"\n            :style=\"{\n              marginTop: '8px',             /* Space from parent content */\n              paddingLeft: '16px',          /* Indent nested items */\n              borderLeft: '2px solid #eaecf0',  /* Visual nesting indicator */\n              paddingTop: '4px'             /* Top spacing */\n            }\"\n          >\n            <tree-node\n              v-for=\"child in childPacks\"\n              :key=\"child.id\"\n              :node=\"child\"\n              :depth=\"depth + 1\"\n              :parent-pack-name=\"nodePackName\"\n              @set-pack-action=\"$emit('set-pack-action', $event)\"\n            />\n          </div>\n        </transition>\n      </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onBeforeUnmount, watch } from 'vue'\nimport { CdxButton } from '@wikimedia/codex'\nimport { store } from '../state/store'\nimport { packsAction } from '../api/endpoints'\nimport { mergeDiff } from '../state/merge'\n\nconst props = defineProps({\n  node: { type: Object, required: true },\n  depth: { type: Number, required: true },\n  parentPackName: { type: String, default: null },\n})\nconst emit = defineEmits(['set-pack-action'])\n\nconst expanded = ref(false)\nlet prefixTimer = null\nlet pageTimer = null\n\n/**\n * Get the current value from the page's textbox in the DOM.\n * This is used to check if API responses are stale.\n */\nfunction getCurrentTextboxValue(packName, pageName) {\n  const input = document.querySelector(\n    `input.page-input[data-pack-name=\"${packName}\"][data-page-name=\"${pageName}\"]`\n  )\n  if (!input) return null\n  \n  const editableValue = input.value\n  const pack = store.packs[packName]\n  const prefix = pack?.prefix || ''\n  const prefixWithSlash = prefix ? (prefix.endsWith('/') ? prefix : prefix + '/') : ''\n  \n  return prefixWithSlash ? prefixWithSlash + editableValue : editableValue\n}\n\n/**\n * Get the current value from the pack prefix input in the DOM.\n * This is used to check if API responses are stale.\n */\nfunction getCurrentPrefixValue(packName) {\n  const input = document.querySelector(\n    `input.prefix-input[data-pack-name=\"${packName}\"]`\n  )\n  return input ? input.value : null\n}\n\nconst hasChildren = computed(\n  () => !!(props.node.children && props.node.children.length)\n)\nconst packState = computed(() =>\n  props.node.type === 'pack' ? store.packs[props.node.label] || null : null\n)\nconst isPackSelected = computed(() => {\n  const action = packState.value?.action\n  return action && action !== 'unchanged'\n})\nconst isPackEditable = computed(() => {\n  const action = packState.value?.action\n  const installed = packState.value?.installed\n  return action === 'install' && !installed\n})\nconst showPackEditor = computed(() => {\n  const action = packState.value?.action\n  const installed = packState.value?.installed\n  return (action === 'install' || action === 'update') || installed\n})\nconst prefixInputValue = computed(() => packState.value?.prefix || '')\nconst nodePackName = computed(() =>\n  props.node.type === 'pack' ? props.node.label : null\n)\nconst canUpdate = computed(() => {\n  const ps = packState.value\n  if (!ps) return false\n  if (ps.current_version === null) return false\n  if (!ps.target_version) return false\n  return ps.target_version > ps.current_version\n})\n\nconst subtreeHasAction = computed(() => {\n  store.stateHash\n  const check = (n) => {\n    if (n.type === 'pack') {\n      const s = store.packs[n.label]\n      if (s && s.action && s.action !== 'unchanged') return true\n    }\n    if (!n.children) return false\n    for (const c of n.children) if (check(c)) return true\n    return false\n  }\n  return check(props.node)\n})\nexpanded.value = props.depth < 2 || subtreeHasAction.value\n\nfunction toggleExpanded() { expanded.value = !expanded.value }\n\nfunction toggleAction(action) {\n  const current = packState.value?.action\n  const next = current === action ? 'unchanged' : action\n  emit('set-pack-action', { pack_name: props.node.label, action: next })\n}\n\nfunction toggleInstall() {\n  toggleAction('install')\n}\n\nfunction toggleRemove() {\n  toggleAction('remove')\n}\n\nfunction toggleUpdate() {\n  toggleAction('update')\n}\n\nfunction onPrefixChange(e) {\n  if (!isPackEditable.value) return\n  const val = e.target.value\n  if (prefixTimer) clearTimeout(prefixTimer)\n  prefixTimer = setTimeout(() => sendSetPackPrefixCommand(val), 200)\n}\n\nasync function sendSetPackPrefixCommand(prefix) {\n  if (store.busy) return\n  \n  const packName = props.node.label\n  \n  try {\n    store.busy = true\n    const response = await packsAction({\n      command: 'set_pack_prefix',\n      repo_url: store.repoUrl,\n      ref: store.ref,\n      data: { pack_name: packName, prefix },\n    })\n    \n    // Check what's CURRENTLY in the prefix input (user might have typed more)\n    const currentPrefixValue = getCurrentPrefixValue(packName)\n    const responsePrefix = response.diff[packName]?.prefix\n    \n    // Only apply if response matches current prefix input value\n    // This prevents stale responses from overwriting newer user input\n    if (currentPrefixValue !== null && responsePrefix !== currentPrefixValue) {\n      console.log('[sendSetPackPrefixCommand] üö´ Ignoring stale response - would overwrite user input')\n      // Do NOT update anything - any store update triggers re-render which overwrites textbox\n      return\n    }\n    \n    mergeDiff(store.packs, response.diff)\n    store.stateHash = response.state_hash\n    store.warnings = response.warnings\n  } catch (e) {\n    console.error('set_pack_prefix failed:', e)\n  } finally {\n    store.busy = false\n  }\n}\n\n/**\n * Shared helper to handle rename page API calls with stale response detection.\n * Only applies the response if it matches the current textbox value.\n */\nasync function handleRenamePageResponse(packName, pageName, response) {\n  const currentTextboxValue = getCurrentTextboxValue(packName, pageName)\n  const responseFinalTitle = response.diff[packName]?.pages?.[pageName]?.final_title\n  \n  // Only apply if response matches current textbox value\n  // This prevents stale responses from overwriting newer user input\n  if (currentTextboxValue !== null && responseFinalTitle !== currentTextboxValue) {\n    console.log('[handleRenamePageResponse] üö´ Ignoring stale response - would overwrite user input')\n    // Do NOT update anything - any store update triggers re-render which overwrites textbox\n    return\n  }\n  \n  mergeDiff(store.packs, response.diff)\n  store.stateHash = response.state_hash\n  store.warnings = response.warnings\n}\n\nonBeforeUnmount(() => {\n  if (prefixTimer) clearTimeout(prefixTimer)\n  if (pageTimer) clearTimeout(pageTimer)\n})\n\nfunction $t(k) { return mw.msg(k) }\n\nfunction getPageTitle(pageName) {\n  const parentPack = store.packs[props.node.label]\n  const pageState = parentPack?.pages?.[pageName]\n  return pageState?.final_title || pageName\n}\n\nfunction getPageState(pageName) {\n  const parentPack = store.packs[props.node.label]\n  return parentPack?.pages?.[pageName] || null\n}\n\nfunction getPageBackground(pageName) {\n  const pageState = getPageState(pageName)\n  if (!pageState) return 'white'\n  \n  if (pageState.installed) return 'rgba(232, 240, 248, 0.4)'\n  if (packState.value?.action === 'install') return 'rgba(232, 245, 233, 0.6)'\n  if (packState.value?.action === 'remove') return 'rgba(255, 235, 238, 0.6)'\n  return 'white'\n}\n\nfunction getDisplayPrefix(pageName) {\n  return packState.value?.prefix || ''\n}\n\nfunction getDisplayPrefixWithSlash(pageName) {\n  const prefix = getDisplayPrefix(pageName)\n  return prefix ? (prefix.endsWith('/') ? prefix : prefix + '/') : ''\n}\n\nfunction getPageEditableTitle(pageName) {\n  const pageState = getPageState(pageName)\n  if (!pageState) return ''\n  \n  const full = pageState.final_title || ''\n  const pref = getDisplayPrefixWithSlash(pageName)\n  \n  // Remove prefix from the title to show only the editable part\n  if (pref && full.startsWith(pref)) {\n    return full.slice(pref.length)\n  }\n  \n  return full\n}\n\nfunction getPageHasCollision(pageName) {\n  const pageState = getPageState(pageName)\n  const full = pageState?.final_title\n  if (!full || !props.node.label) return false\n  return store.warnings.some(\n    (w) => w.includes(full) && w.includes(props.node.label)\n  )\n}\n\nfunction getCollisionTooltip(pageName) {\n  const pageState = getPageState(pageName)\n  const full = pageState?.final_title\n  if (!full || !props.node.label) return ''\n  return store.warnings\n    .filter((w) => w.includes(full) && w.includes(props.node.label))\n    .join('\\n')\n}\n\nfunction getCollisionId(pageName) {\n  return `collision-${props.node.label}-${pageName}`\n}\n\nfunction getPageEditable(pageName) {\n  // Check if this specific page can be edited\n  const pageState = getPageState(pageName)\n  if (!pageState) return false\n  \n  const action = packState.value?.action\n  \n  // Can edit if pack is being installed (and page is not already installed)\n  if (action === 'install' && !pageState.installed) return true\n  \n  // Can edit if pack is being updated\n  if (action === 'update') return true\n  \n  return false\n}\n\nfunction onPageTitleChangeForPage(e, pageName) {\n  // Check if pack is editable\n  const action = packState.value?.action\n  if (action !== 'install' && action !== 'update') {\n    return\n  }\n  \n  const pageState = getPageState(pageName)\n  if (!pageState) {\n    return\n  }\n  \n  // For install action, only allow editing if page is not already installed\n  if (action === 'install' && pageState.installed) {\n    return\n  }\n  \n  const editable = e.target.value\n  \n  if (pageTimer) clearTimeout(pageTimer)\n  pageTimer = setTimeout(() => {\n    const prefix = getDisplayPrefixWithSlash(pageName)\n    const newTitle = prefix ? prefix + editable : editable\n    sendRenamePageCommand(pageName, newTitle)\n  }, 200)\n}\n\nasync function sendRenamePageCommand(pageName, newTitle) {\n  if (store.busy) return\n  \n  const packName = props.node.label\n  \n  try {\n    store.busy = true\n    const response = await packsAction({\n      command: 'rename_page',\n      repo_url: store.repoUrl,\n      ref: store.ref,\n      data: {\n        pack_name: packName,\n        page_name: pageName,\n        new_title: newTitle,\n      },\n    })\n    \n    await handleRenamePageResponse(packName, pageName, response)\n  } catch (e) {\n    console.error('rename_page failed:', e)\n  } finally {\n    store.busy = false\n  }\n}\n\nconst sortedChildren = computed(() => {\n  if (!props.node.children) return []\n  const arr = [...props.node.children]\n  const ci = (s) => (s || '').toLocaleLowerCase()\n  arr.sort((a, b) => {\n    if (a.type === 'page' && b.type !== 'page') return -1\n    if (a.type !== 'page' && b.type === 'page') return 1\n    const la = ci(a.label)\n    const lb = ci(b.label)\n    if (la < lb) return -1\n    if (la > lb) return 1\n    return 0\n  })\n  return arr\n})\n\n// Separate pages and nested packs\nconst childPages = computed(() => {\n  if (!props.node.children) return []\n  return props.node.children.filter(child => child.type === 'page')\n})\n\nconst childPacks = computed(() => {\n  if (!props.node.children) return []\n  return props.node.children.filter(child => child.type === 'pack')\n})\n\n// Smooth expand/collapse animations\nfunction onChildrenEnter(el) {\n  el.style.height = '0'\n  el.style.opacity = '0'\n  el.offsetHeight // Force reflow\n  el.style.transition = 'height 0.3s ease, opacity 0.3s ease'\n  el.style.height = el.scrollHeight + 'px'\n  el.style.opacity = '1'\n}\n\nfunction onChildrenLeave(el) {\n  el.style.height = el.scrollHeight + 'px'\n  el.offsetHeight // Force reflow\n  el.style.transition = 'height 0.3s ease, opacity 0.3s ease'\n  el.style.height = '0'\n  el.style.opacity = '0'\n}\n</script>\n\n<style>\n/*\n  ============================================================================\n  CSS CLASSES - SUPPLEMENTARY ONLY\n  ============================================================================\n  \n  ‚ö†Ô∏è IMPORTANT: These CSS classes are NOT used for layout or visual styling!\n  \n  WHY: MediaWiki and Codex have extremely high CSS specificity that overrides\n       our stylesheet classes. Inline styles (in the template above) have\n       the highest specificity and cannot be overridden.\n  \n  WHAT THIS SECTION DOES:\n  - Provides fallback styles for browsers without JS\n  - Defines animation/transition effects\n  - Sets display modes (flex, inline-flex, etc.) as base rules\n  - Provides semantic class names for debugging\n  \n  WHAT THIS SECTION DOES NOT DO:\n  - Control layout (padding, margin, borders) - use inline styles\n  - Control colors (background, border-color) - use inline styles\n  - Control visibility (shadows, opacity) - use inline styles\n  \n  IF YOU NEED TO CHANGE VISUAL APPEARANCE:\n  1. Update the :style=\"\" bindings in the <template> section above\n  2. Do NOT add new CSS classes here expecting them to work\n  3. Test by inspecting element in browser DevTools to verify inline styles\n  \n  ============================================================================\n*/\n\n/* ==================== TREE NODE BASE ==================== */\n\n.labki-tree .tree-node {\n  margin-bottom: 0 !important;\n}\n\n/* ==================== PACK CARD - PROPER NESTING ==================== */\n/* Most styling is inline (see template) */\n\n.labki-tree .pack-card {\n  transition: all 0.2s ease !important;\n}\n\n/* Shadow hierarchy - deeper = lighter shadow */\n.labki-tree .pack-card[data-depth=\"0\"] {\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;\n}\n\n.labki-tree .pack-card[data-depth=\"1\"] {\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08) !important;\n}\n\n.labki-tree .pack-card[data-depth=\"2\"] {\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06) !important;\n}\n\n.labki-tree .pack-card[data-depth=\"3\"],\n.labki-tree .pack-card[data-depth=\"4\"],\n.labki-tree .pack-card[data-depth=\"5\"] {\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04) !important;\n}\n\n/* Subtle installed state */\n.labki-tree .tree-node[data-installed=\"true\"] .pack-card {\n  background: #f8f9fa !important;\n  border-color: #a2a9b1 !important;\n}\n\n/* Subtle action state overlays */\n.labki-tree .tree-node[data-action=\"install\"] .pack-card {\n  background: linear-gradient(to right, #e8f5e9 0%, #ffffff 100%) !important;\n  border-left: 3px solid #36c !important;\n}\n\n.labki-tree .tree-node[data-action=\"remove\"] .pack-card {\n  background: linear-gradient(to right, #ffebee 0%, #ffffff 100%) !important;\n  border-left: 3px solid #d33 !important;\n}\n\n.labki-tree .tree-node[data-action=\"update\"] .pack-card {\n  background: linear-gradient(to right, #fff8e1 0%, #ffffff 100%) !important;\n  border-left: 3px solid #fc3 !important;\n}\n\n.labki-tree .pack-card:hover {\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12) !important;\n}\n\n/* ==================== NODE ROW - HORIZONTAL LAYOUT ==================== */\n\n.labki-tree .pack-card .node-row {\n  display: flex !important;\n  align-items: center !important;\n  flex-wrap: nowrap !important;\n  gap: 8px !important;\n  min-height: 40px !important;\n}\n\n.labki-tree .name-section {\n  display: inline-flex !important;\n  align-items: center !important;\n  gap: 8px !important;\n  flex-shrink: 0 !important;\n  flex-wrap: nowrap !important;\n}\n\n.labki-tree .spacer {\n  display: inline-block !important;\n  flex-grow: 1 !important;\n  min-width: 12px !important;\n}\n\n/* ==================== TOGGLE & ICON ==================== */\n\n.labki-tree .toggle {\n  background: none !important;\n  border: none !important;\n  cursor: pointer !important;\n  padding: 4px !important;\n  font-size: 12px !important;\n  color: #72777d !important;\n  flex-shrink: 0 !important;\n  width: 24px !important;\n  height: 24px !important;\n  display: inline-flex !important;\n  align-items: center !important;\n  justify-content: center !important;\n  border-radius: 4px !important;\n  transition: all 0.15s ease !important;\n}\n\n.labki-tree .toggle:hover {\n  background: #eaecf0 !important;\n  color: #202122 !important;\n}\n\n.labki-tree .toggle-spacer {\n  width: 24px !important;\n  flex-shrink: 0 !important;\n  display: inline-block !important;\n}\n\n.labki-tree .node-icon {\n  font-size: 20px !important;\n  line-height: 1 !important;\n  flex-shrink: 0 !important;\n}\n\n.labki-tree .label {\n  font-size: 1em !important;\n  font-weight: 600 !important;\n  color: #202122 !important;\n  white-space: nowrap !important;\n}\n\n/* ==================== BADGES ==================== */\n\n.labki-tree .badge {\n  display: inline-flex !important;\n  align-items: center !important;\n  font-size: 0.75em !important;\n  padding: 4px 10px !important;\n  border-radius: 12px !important;\n  white-space: nowrap !important;\n  font-weight: 500 !important;\n  flex-shrink: 0 !important;\n}\n\n.labki-tree .badge.manual {\n  background: #eaf3ff !important;\n  color: #36c !important;\n  border: 1px solid #b8d4ff !important;\n}\n\n.labki-tree .badge.auto {\n  background: #fef6e7 !important;\n  color: #ac6600 !important;\n  border: 1px solid #fce29f !important;\n}\n\n.labki-tree .badge.version {\n  background: #f0f0f0 !important;\n  color: #54595d !important;\n  border: 1px solid #c8ccd1 !important;\n}\n\n.labki-tree .badge.update {\n  background: #fff3cd !important;\n  color: #8a6d3b !important;\n  border: 1px solid #fce29f !important;\n  animation: pulse 2s infinite !important;\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.7; }\n}\n\n/* ==================== INLINE EDITORS ==================== */\n\n.labki-tree .prefix-editor-inline {\n  display: inline-flex !important;\n  align-items: center !important;\n  gap: 6px !important;\n  margin-left: 8px !important;\n  flex-wrap: nowrap !important;\n  flex-shrink: 0 !important;\n}\n\n.labki-tree .arrow {\n  color: #72777d !important;\n  font-size: 1.1em !important;\n  flex-shrink: 0 !important;\n}\n\n.labki-tree .prefix-label {\n  font-size: 0.85em !important;\n  color: #54595d !important;\n  white-space: nowrap !important;\n  flex-shrink: 0 !important;\n  font-weight: 500 !important;\n}\n\n.labki-tree .prefix-input {\n  padding: 6px 10px !important;\n  border: 1px solid #c8ccd1 !important;\n  border-radius: 4px !important;\n  font-size: 0.85em !important;\n  font-family: 'Monaco', 'Menlo', 'Consolas', monospace !important;\n  background: white !important;\n  color: #202122 !important;\n  width: 180px !important;\n  flex-shrink: 0 !important;\n  transition: all 0.15s ease !important;\n}\n\n.labki-tree .prefix-input:focus {\n  outline: none !important;\n  border-color: #36c !important;\n  box-shadow: 0 0 0 1px #36c !important;\n}\n\n.labki-tree .prefix-input:disabled,\n.labki-tree .prefix-input[readonly] {\n  background: #f8f9fa !important;\n  color: #72777d !important;\n  cursor: not-allowed !important;\n}\n\n/* ==================== META ROW ==================== */\n/* Most styling is inline (see template) */\n\n/* ==================== CHILDREN CONTAINER (INSIDE CARD) ==================== */\n/* Most styling is inline (see template) */\n\n.labki-tree .children {\n  overflow: hidden !important;\n}\n\n/* Smooth transitions */\n.labki-tree .children-enter-active,\n.labki-tree .children-leave-active {\n  transition: all 0.3s ease !important;\n}\n\n.labki-tree .children-enter-from,\n.labki-tree .children-leave-to {\n  opacity: 0 !important;\n  height: 0 !important;\n}\n\n/* ==================== PAGE ROW ==================== */\n\n.labki-tree .page-row {\n  display: flex !important;\n  align-items: center !important;\n  flex-wrap: nowrap !important;\n  gap: 8px !important;\n  padding: 8px 12px !important;\n  background: rgba(255, 255, 255, 0.5) !important;\n  border-radius: 6px !important;\n  margin-bottom: 6px !important;\n  transition: all 0.15s ease !important;\n  min-height: 36px !important;\n}\n\n.labki-tree .page-row:hover {\n  background: #f8f9fa !important;\n}\n\n.labki-tree .tree-node[data-installed=\"true\"] .page-row {\n  background: rgba(232, 240, 248, 0.4) !important;\n}\n\n.labki-tree .tree-node[data-action=\"install\"] .page-row {\n  background: rgba(232, 245, 233, 0.6) !important;\n}\n\n.labki-tree .tree-node[data-action=\"remove\"] .page-row {\n  background: rgba(255, 235, 238, 0.6) !important;\n}\n\n/* Page rename editor */\n.labki-tree .page-rename-inline {\n  display: inline-flex !important;\n  align-items: center !important;\n  gap: 0 !important;\n  margin-left: 8px !important;\n  flex-wrap: nowrap !important;\n  flex-shrink: 0 !important;\n}\n\n.labki-tree .prefix-chip-inline {\n  padding: 6px 10px !important;\n  background: #f0f0f0 !important;\n  border: 1px solid #c8ccd1 !important;\n  border-right: none !important;\n  border-radius: 4px 0 0 4px !important;\n  font-size: 0.85em !important;\n  font-family: 'Monaco', 'Menlo', 'Consolas', monospace !important;\n  color: #54595d !important;\n  white-space: nowrap !important;\n}\n\n.labki-tree .page-input {\n  padding: 6px 10px !important;\n  border: 1px solid #c8ccd1 !important;\n  border-radius: 4px !important;\n  font-size: 0.85em !important;\n  font-family: 'Monaco', 'Menlo', 'Consolas', monospace !important;\n  background: white !important;\n  color: #202122 !important;\n  width: 160px !important;\n  flex-shrink: 0 !important;\n  transition: all 0.15s ease !important;\n}\n\n.labki-tree .prefix-chip-inline + .page-input {\n  border-radius: 0 4px 4px 0 !important;\n}\n\n.labki-tree .page-input:focus {\n  outline: none !important;\n  border-color: #36c !important;\n  box-shadow: 0 0 0 1px #36c !important;\n}\n\n.labki-tree .page-input:disabled,\n.labki-tree .page-input[readonly] {\n  background: #f8f9fa !important;\n  color: #72777d !important;\n  cursor: not-allowed !important;\n}\n\n.labki-tree .page-input.has-collision {\n  border-color: #d33 !important;\n  background: #fff5f5 !important;\n}\n\n.labki-tree .collision-icon {\n  font-size: 1.1em !important;\n  cursor: help !important;\n  margin-left: 4px !important;\n}\n\n/* ==================== ACTION BUTTONS ==================== */\n\n.labki-tree .actions {\n  display: inline-flex !important;\n  align-items: center !important;\n  gap: 8px !important;\n  flex-shrink: 0 !important;\n  flex-wrap: nowrap !important;\n}\n\n.labki-tree .action-item {\n  display: inline-flex !important;\n  flex-shrink: 0 !important;\n}\n\n.labki-tree :deep(.cdx-button) {\n  display: inline-flex !important;\n  font-size: 0.9em !important;\n  padding: 8px 16px !important;\n  transition: all 0.2s ease !important;\n  white-space: nowrap !important;\n  flex-shrink: 0 !important;\n  border-radius: 6px !important;\n}\n\n/* Active state styling */\n.labki-tree :deep(.cdx-button.active[action=\"progressive\"]) {\n  background-color: #2a4b8d !important;\n  border-color: #2a4b8d !important;\n  color: white !important;\n  font-weight: 600 !important;\n  box-shadow: 0 0 0 3px rgba(54, 108, 204, 0.2) !important;\n  transform: scale(1.02) !important;\n}\n\n.labki-tree :deep(.cdx-button.active[action=\"destructive\"]) {\n  background-color: #d73333 !important;\n  border-color: #d73333 !important;\n  color: white !important;\n  font-weight: 600 !important;\n  box-shadow: 0 0 0 3px rgba(215, 51, 51, 0.2) !important;\n  transform: scale(1.02) !important;\n}\n\n.labki-tree :deep(.cdx-button.active:not([action=\"progressive\"]):not([action=\"destructive\"])) {\n  background-color: #fc3 !important;\n  border-color: #fc3 !important;\n  color: #202122 !important;\n  font-weight: 600 !important;\n  box-shadow: 0 0 0 3px rgba(255, 204, 51, 0.2) !important;\n  transform: scale(1.02) !important;\n}\n\n.labki-tree :deep(.cdx-button:hover) {\n  transform: translateY(-1px) !important;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;\n}\n\n.labki-tree :deep(.cdx-button:active) {\n  transform: translateY(0) !important;\n}\n\n/* ==================== RESPONSIVE ADJUSTMENTS ==================== */\n\n@media (max-width: 768px) {\n  .labki-tree .pack-card {\n    padding: 10px !important;\n  }\n  \n  .labki-tree .node-row {\n    flex-wrap: wrap !important;\n  }\n  \n  .labki-tree .actions {\n    width: 100% !important;\n    justify-content: flex-start !important;\n    margin-top: 8px !important;\n  }\n  \n  .labki-tree .prefix-editor-inline,\n  .labki-tree .page-rename-inline {\n    width: 100% !important;\n    margin-left: 0 !important;\n    margin-top: 8px !important;\n  }\n}\n</style>","<template>\n  <div class=\"hierarchy-tree-container\">\n    <h3>{{ $t('labkipackmanager-hierarchy-title') }}</h3>\n    \n    <div v-if=\"!hierarchy\" class=\"no-hierarchy\">\n      <p>{{ $t('labkipackmanager-no-hierarchy-loaded') }}</p>\n    </div>\n    \n    <div v-else class=\"tree-content\">\n      <div class=\"tree-stats\">\n        <span>{{ $t('labkipackmanager-pack-count') }}: {{ hierarchy.meta.pack_count }}</span>\n        <span>{{ $t('labkipackmanager-page-count') }}: {{ hierarchy.meta.page_count }}</span>\n      </div>\n      \n      <div class=\"tree-nodes labki-tree\">\n        <tree-node\n          v-for=\"node in hierarchy.root_nodes\"\n          :key=\"node.id\"\n          :node=\"node\"\n          :depth=\"0\"\n          @set-pack-action=\"onSetPackAction\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { store } from '../state/store';\nimport { packsAction } from '../api/endpoints';\nimport { mergeDiff } from '../state/merge';\nimport TreeNode from './TreeNode.vue';\n\ndefineProps({\n  hierarchy: Object\n});\n\nasync function onSetPackAction(payload) {\n  // Send set_pack_action command to backend\n  await sendCommand('set_pack_action', {\n    pack_name: payload.pack_name,\n    action: payload.action\n  });\n}\n\nasync function sendCommand(command, data) {\n  if (store.busy) return;\n  \n  try {\n    store.busy = true;\n    \n    console.log(`[sendCommand] Sending ${command}:`, data);\n    const response = await packsAction({\n      command,\n      repo_url: store.repoUrl,\n      ref: store.ref,\n      data,\n    });\n    \n    console.log(`[sendCommand] Response diff:`, response.diff);\n    console.log(`[sendCommand] Pack state before merge:`, data.pack_name ? store.packs[data.pack_name] : 'N/A');\n    \n    // Merge diff into store\n    mergeDiff(store.packs, response.diff);\n    store.stateHash = response.state_hash;\n    store.warnings = response.warnings;\n    \n    console.log(`[sendCommand] Pack state after merge:`, data.pack_name ? store.packs[data.pack_name] : 'N/A');\n  } catch (e) {\n    console.error('Command failed:', e);\n    // You might want to emit an error event here\n  } finally {\n    store.busy = false;\n  }\n}\n\n// Helper for i18n\nfunction $t(key) {\n  return mw.msg(key);\n}\n</script>\n\n<style scoped>\n.hierarchy-tree-container {\n  padding: 20px;\n  background: white;\n  border: 1px solid #c8ccd1;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  width: 100%;\n  max-width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\nh3 {\n  margin-top: 0;\n  margin-bottom: 16px;\n  font-size: 1.2em;\n}\n\n.no-hierarchy {\n  padding: 16px;\n  text-align: center;\n  color: #72777d;\n}\n\n.no-hierarchy p {\n  margin: 0;\n}\n\n.tree-stats {\n  display: flex;\n  gap: 24px;\n  padding: 12px;\n  background: #f8f9fa;\n  border-radius: 4px;\n  margin-bottom: 16px;\n  font-size: 0.9em;\n}\n\n.tree-nodes {\n  margin-top: 16px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n</style>\n\n","<template>\n  <cdx-dialog\n    v-model:open=\"isOpen\"\n    :title=\"$t('labkipackmanager-state-out-of-sync-title') || 'State out of sync'\"\n    :primary-action=\"primaryAction\"\n    :default-action=\"defaultAction\"\n    @primary=\"onPrimary\"\n    @default=\"onDefault\"\n  >\n    <div class=\"state-sync-modal-content\">\n      <p class=\"state-sync-intro\">{{ message }}</p>\n\n      <div class=\"modal-warning\">\n        <span class=\"warning-icon\">‚ö†Ô∏è</span>\n        <div class=\"warning-copy\">\n          <strong :style=\"diffStyles.warningHeading\">Heads up</strong>\n          <span :style=\"diffStyles.warningText\">Syncing with the backend will discard the pending changes listed below.</span>\n        </div>\n      </div>\n\n      <div v-if=\"diffList.length > 0\" class=\"diff-summary\" :style=\"diffStyles.summary\">\n        {{ diffList.length === 1 ? '1 pack needs review.' : diffList.length + ' packs need review.' }}\n      </div>\n\n      <div class=\"diff-container\">\n        <div v-if=\"diffList.length === 0\" class=\"diff-empty\">\n          No detailed differences were detected, but hashes still differ. Consider syncing with the backend.\n        </div>\n        <div v-else class=\"diff-list\">\n          <div v-for=\"pack in diffList\" :key=\"pack.packName\" class=\"diff-pack\">\n            <div class=\"diff-pack-header\">\n              <h4 class=\"diff-pack-name\">{{ pack.packName }}</h4>\n              <span class=\"diff-chip\">{{ pack.changeCount === 1 ? '1 change' : pack.changeCount + ' changes' }}</span>\n            </div>\n\n            <div v-if=\"pack.fieldChanges.length\" class=\"diff-section\">\n            <div class=\"diff-section-title\">Pack fields</div>\n              <div\n                v-for=\"field in pack.fieldChanges\"\n                :key=\"field.name\"\n                class=\"diff-row\"\n              >\n                <span class=\"diff-label\" :style=\"diffStyles.label\">{{ formatFieldName(field.name) }}</span>\n                <span class=\"diff-value diff-client\" :style=\"[diffStyles.valueBase, diffStyles.valueClient]\">\n                  <span class=\"diff-pill diff-pill-old\" :style=\"[diffStyles.pillBase, diffStyles.pillOld]\">Was</span>\n                  <span class=\"diff-text\" :style=\"diffStyles.valueText\">{{ formatDifferenceValue(field.client) }}</span>\n                </span>\n                <span class=\"diff-arrow\" :style=\"diffStyles.arrow\">‚Üí</span>\n                <span class=\"diff-value diff-server\" :style=\"[diffStyles.valueBase, diffStyles.valueServer]\">\n                  <span class=\"diff-pill diff-pill-new\" :style=\"[diffStyles.pillBase, diffStyles.pillNew]\">Now</span>\n                  <span class=\"diff-text\" :style=\"diffStyles.valueText\">{{ formatDifferenceValue(field.server) }}</span>\n                </span>\n              </div>\n            </div>\n\n            <div\n              v-for=\"page in pack.pageChanges\"\n              :key=\"page.pageName\"\n              class=\"diff-section\"\n            >\n              <div class=\"diff-section-title\">\n                Page: <span class=\"diff-page-name\">{{ page.pageName }}</span>\n              </div>\n              <div\n                v-for=\"pageField in page.fields\"\n                :key=\"pageField.name\"\n                class=\"diff-row\"\n              >\n                <span class=\"diff-label\" :style=\"diffStyles.label\">{{ formatFieldName(pageField.name) }}</span>\n                <span class=\"diff-value diff-client\" :style=\"[diffStyles.valueBase, diffStyles.valueClient]\">\n                  <span class=\"diff-pill diff-pill-old\" :style=\"[diffStyles.pillBase, diffStyles.pillOld]\">Was</span>\n                  <span class=\"diff-text\" :style=\"diffStyles.valueText\">{{ formatDifferenceValue(pageField.client) }}</span>\n                </span>\n                <span class=\"diff-arrow\" :style=\"diffStyles.arrow\">‚Üí</span>\n                <span class=\"diff-value diff-server\" :style=\"[diffStyles.valueBase, diffStyles.valueServer]\">\n                  <span class=\"diff-pill diff-pill-new\" :style=\"[diffStyles.pillBase, diffStyles.pillNew]\">Now</span>\n                  <span class=\"diff-text\" :style=\"diffStyles.valueText\">{{ formatDifferenceValue(pageField.server) }}</span>\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-actions\">\n        <cdx-button\n          weight=\"normal\"\n          :disabled=\"attemptingReconcile || reconcileCommands.length === 0\"\n          @click=\"onReconcile\"\n        >\n          Try to reconcile & reapply\n        </cdx-button>\n      </div>\n\n      <div v-if=\"reconcileMessage\" class=\"modal-status\">\n        {{ reconcileMessage }}\n      </div>\n    </div>\n  </cdx-dialog>\n</template>\n\n<script setup>\nimport { computed } from 'vue';\nimport { CdxDialog, CdxButton } from '@wikimedia/codex';\n\nconst props = defineProps({\n  modelValue: { type: Boolean, default: false },\n  message: { type: String, default: '' },\n  differences: { type: Object, default: () => ({}) },\n  reconcileCommands: { type: Array, default: () => [] },\n  attemptingReconcile: { type: Boolean, default: false },\n  reconcileMessage: { type: String, default: '' },\n});\n\nconst emit = defineEmits(['update:modelValue', 'sync', 'cancel', 'reconcile']);\n\nconst isOpen = computed({\n  get: () => props.modelValue,\n  set: (value) => emit('update:modelValue', value),\n});\n\nconst diffList = computed(() => {\n  if (!props.differences || typeof props.differences !== 'object') {\n    return [];\n  }\n\n  return Object.entries(props.differences)\n    .map(([packName, packDiff]) => {\n      const fieldChanges = Object.entries(packDiff?.fields ?? {})\n        .map(([name, values]) => ({\n          name,\n          client: values?.client,\n          server: values?.server,\n        }))\n        .filter((entry) => !isValuesEqual(entry.client, entry.server));\n\n      const pageChanges = Object.entries(packDiff?.pages ?? {})\n        .map(([pageName, pageDiff]) => {\n          const pageFields = Object.entries(pageDiff ?? {})\n            .map(([name, values]) => ({\n              name,\n              client: values?.client,\n              server: values?.server,\n            }))\n            .filter((entry) => !isValuesEqual(entry.client, entry.server));\n\n          return {\n            pageName,\n            fields: pageFields,\n          };\n        })\n        .filter((page) => page.fields.length > 0);\n\n      const changeCount =\n        fieldChanges.length +\n        pageChanges.reduce((total, page) => total + page.fields.length, 0);\n\n      if (changeCount === 0) {\n        return null;\n      }\n\n      return { packName, fieldChanges, pageChanges, changeCount };\n    })\n    .filter((entry) => entry !== null);\n});\n\nconst diffStyles = Object.freeze({\n  summary: {\n    fontSize: '0.95em',\n    fontWeight: 600,\n    color: '#202122',\n    background: '#eef6ff',\n    border: '1px solid #cde3ff',\n    borderRadius: '8px',\n    padding: '10px 12px',\n  },\n  warningHeading: {\n    fontWeight: 700,\n    display: 'block',\n    marginBottom: '2px',\n  },\n  warningText: {\n    lineHeight: '1.4',\n  },\n  label: {\n    fontWeight: 600,\n    color: '#202122',\n    textTransform: 'capitalize',\n    display: 'inline-flex',\n    alignItems: 'center',\n    gap: '4px',\n    minWidth: '0',\n  },\n  arrow: {\n    color: '#5e6a76',\n    fontSize: '1.2em',\n    fontWeight: 600,\n  },\n  valueBase: {\n    display: 'inline-flex',\n    alignItems: 'center',\n    gap: '8px',\n    padding: '6px 10px',\n    borderRadius: '8px',\n    fontFamily: \"'Menlo', 'Monaco', 'Consolas', monospace\",\n    wordBreak: 'break-word',\n  },\n  valueClient: {\n    background: '#ffe6e2',\n    color: '#b42318',\n    border: '1px solid #f5b5ac',\n  },\n  valueServer: {\n    background: '#e6f6ec',\n    color: '#11743a',\n    border: '1px solid #9fdcc2',\n  },\n  valueText: {\n    whiteSpace: 'pre-wrap',\n  },\n  pillBase: {\n    fontSize: '0.7em',\n    fontWeight: 700,\n    textTransform: 'uppercase',\n    padding: '2px 6px',\n    borderRadius: '999px',\n    letterSpacing: '0.5px',\n  },\n  pillOld: {\n    background: 'rgba(180, 35, 24, 0.12)',\n    color: '#b42318',\n  },\n  pillNew: {\n    background: 'rgba(17, 116, 58, 0.12)',\n    color: '#11743a',\n  },\n});\n\nfunction isValuesEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (\n    (a === undefined && b === null) ||\n    (b === undefined && a === null)\n  ) {\n    return true;\n  }\n\n  if (typeof a === 'object' && typeof b === 'object') {\n    try {\n      return JSON.stringify(a) === JSON.stringify(b);\n    } catch (e) {\n      return false;\n    }\n  }\n\n  return false;\n}\n\nconst primaryAction = computed(() => ({\n  label: $t('labkipackmanager-sync-frontend-with-backend') || 'Sync frontend with backend',\n  actionType: 'progressive',\n  disabled: props.attemptingReconcile,\n}));\n\nconst defaultAction = computed(() => ({\n  label: $t('labkipackmanager-cancel') || 'Cancel',\n  disabled: props.attemptingReconcile,\n}));\n\nfunction onPrimary() {\n  emit('sync');\n}\n\nfunction onDefault() {\n  isOpen.value = false;\n  emit('cancel');\n}\n\nfunction onReconcile() {\n  if (!props.attemptingReconcile && props.reconcileCommands.length > 0) {\n    emit('reconcile');\n  }\n}\n\nfunction formatDifferenceValue(value) {\n  if (value === null || value === undefined) {\n    return '(empty)';\n  }\n  if (typeof value === 'string') {\n    return value.trim() === '' ? '(empty string)' : value;\n  }\n  if (typeof value === 'boolean' || typeof value === 'number') {\n    return String(value);\n  }\n  try {\n    return JSON.stringify(value);\n  } catch (e) {\n    return String(value);\n  }\n}\n\nfunction formatFieldName(name) {\n  if (!name) {\n    return '';\n  }\n  return name\n    .replace(/_/g, ' ')\n    .replace(/\\b\\w/g, (char) => char.toUpperCase());\n}\n\nfunction $t(key) {\n  return mw.msg(key);\n}\n</script>\n\n<style scoped>\n.state-sync-modal-content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  max-height: 70vh;\n  overflow-y: auto;\n}\n\n.state-sync-intro {\n  margin: 0;\n  color: #54595d;\n  line-height: 1.4;\n}\n\n.modal-warning {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  background: #fff8ed;\n  border: 1px solid #f7d9a8;\n  color: #6b4b16;\n  padding: 12px 16px;\n  border-radius: 10px;\n  font-size: 0.92em;\n}\n\n.warning-icon {\n  font-size: 1.4em;\n  line-height: 1;\n  margin-top: 2px;\n}\n\n.warning-copy {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.diff-summary {\n  font-size: 0.95em;\n  font-weight: 600;\n  color: #202122;\n  background: #eef6ff;\n  border: 1px solid #cde3ff;\n  border-radius: 8px;\n  padding: 10px 12px;\n}\n\n.diff-container {\n  background: #f8f9fa;\n  border-radius: 8px;\n  border: 1px solid #eaecf0;\n  padding: 12px;\n  max-height: 40vh;\n  overflow-y: auto;\n}\n\n.diff-empty {\n  color: #54595d;\n  font-style: italic;\n}\n\n.diff-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.diff-pack {\n  border: 1px solid #dfe3e8;\n  border-radius: 10px;\n  padding: 14px 16px;\n  background: white;\n  box-shadow: 0 4px 12px rgba(15, 23, 42, 0.08);\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.diff-pack-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n  gap: 12px;\n}\n\n.diff-pack-name {\n  margin: 0;\n  font-size: 1.05em;\n  font-weight: 700;\n  color: #202122;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.diff-chip {\n  background: #edf2ff;\n  color: #3246d3;\n  border-radius: 999px;\n  padding: 2px 10px;\n  font-size: 0.75em;\n  font-weight: 600;\n  white-space: nowrap;\n}\n\n.diff-section {\n  margin-bottom: 8px;\n  padding-left: 8px;\n  border-left: 3px solid #c8ccd1;\n}\n\n.diff-section-title {\n  font-size: 0.85em;\n  font-weight: 700;\n  text-transform: uppercase;\n  color: #72777d;\n  margin-bottom: 4px;\n}\n\n.diff-page-name {\n  color: #202122;\n}\n\n.diff-row {\n  display: grid;\n  grid-template-columns: 130px 1fr 20px 1fr;\n  gap: 8px;\n  padding: 6px 0;\n  align-items: center;\n  font-size: 0.9em;\n}\n\n.diff-label {\n  font-weight: 600;\n  color: #202122;\n  text-transform: capitalize;\n}\n\n.diff-label::after {\n  content: ':';\n  margin-left: 4px;\n}\n\n.diff-value {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 10px;\n  border-radius: 8px;\n  font-family: 'Menlo', 'Monaco', 'Consolas', monospace;\n  word-break: break-word;\n}\n\n.diff-value.diff-client {\n  background: #ffe6e2;\n  color: #b42318;\n  border: 1px solid #f5b5ac;\n}\n\n.diff-value.diff-server {\n  background: #e6f6ec;\n  color: #11743a;\n  border: 1px solid #9fdcc2;\n}\n\n.diff-pill {\n  font-size: 0.7em;\n  font-weight: 700;\n  text-transform: uppercase;\n  padding: 2px 6px;\n  border-radius: 999px;\n  letter-spacing: 0.5px;\n}\n\n.diff-pill-old {\n  background: rgba(171, 31, 38, 0.12);\n  color: #ab1f26;\n}\n\n.diff-pill-new {\n  background: rgba(11, 96, 59, 0.12);\n  color: #0b603b;\n}\n\n.diff-text {\n  white-space: pre-wrap;\n}\n\n.diff-arrow {\n  text-align: center;\n  color: #54595d;\n  font-size: 1.2em;\n}\n\n.modal-actions {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.modal-status {\n  font-size: 0.9em;\n  color: #202122;\n  background: #eef2ff;\n  border: 1px solid #a8c9f0;\n  border-radius: 8px;\n  padding: 10px;\n}\n</style>\n\n\n","<template>\n  <div class=\"details-panel\">\n    <StateSyncModal\n      v-model=\"stateSyncModal.visible\"\n      :message=\"stateSyncModal.message\"\n      :differences=\"stateSyncModal.differences\"\n      :reconcile-commands=\"stateSyncModal.reconcileCommands\"\n      :attempting-reconcile=\"stateSyncModal.attemptingReconcile\"\n      :reconcile-message=\"stateSyncModal.reconcileMessage\"\n      @sync=\"syncFrontendWithBackend\"\n      @cancel=\"closeStateSyncModal\"\n      @reconcile=\"reconcileAndReapply\"\n    />\n\n    <div class=\"panel-header\">\n      <h3>{{ $t('labkipackmanager-details-title') }}</h3>\n      <div v-if=\"selectedPacks.length > 0\" class=\"pack-count-badge\">\n        {{ selectedPacks.length }} {{ selectedPacks.length === 1 ? 'pack' : 'packs' }}\n      </div>\n    </div>\n    \n    <div class=\"panel-content\">\n      <!-- Warnings Section -->\n      <div v-if=\"store.warnings.length > 0\" class=\"warnings-section\">\n        <div class=\"section-header\">\n          <span class=\"section-icon\">‚ö†Ô∏è</span>\n          <h4>{{ $t('labkipackmanager-warnings') }}</h4>\n        </div>\n        <div class=\"warnings-list\">\n          <cdx-message\n            v-for=\"(warning, index) in store.warnings\"\n            :key=\"index\"\n            type=\"warning\"\n            :inline=\"true\"\n          >\n            {{ warning }}\n          </cdx-message>\n        </div>\n      </div>\n      \n      <!-- Selected Packs Section -->\n      <div v-if=\"selectedPacks.length > 0\" class=\"selected-packs-section\">\n        <div class=\"section-header\">\n          <span class=\"section-icon\">üì¶</span>\n          <h4>{{ $t('labkipackmanager-selected-packs') }}</h4>\n        </div>\n        <div class=\"packs-grid\">\n          <div\n            v-for=\"pack in selectedPacks\"\n            :key=\"pack.name\"\n            class=\"pack-card\"\n            :style=\"{\n              position: 'relative',\n              padding: '12px 14px',\n              paddingLeft: packStatuses[pack.name] ? '20px' : '14px',\n              background: packStatuses[pack.name] === 'running' ? 'linear-gradient(135deg, #f0f5ff 0%, #ffffff 100%)' :\n                          packStatuses[pack.name] === 'complete' ? 'linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%)' :\n                          packStatuses[pack.name] === 'failed' ? 'linear-gradient(135deg, #fff5f5 0%, #ffffff 100%)' :\n                          packStatuses[pack.name] === 'pending' ? '#fafbfc' :\n                          'white',\n              border: '2px solid #eaecf0',\n              borderLeft: packStatuses[pack.name] === 'running' ? '4px solid #3366cc' :\n                          packStatuses[pack.name] === 'complete' ? '4px solid #14866d' :\n                          packStatuses[pack.name] === 'failed' ? '4px solid #d33' :\n                          packStatuses[pack.name] === 'pending' ? '4px solid #c8ccd1' :\n                          '2px solid #eaecf0',\n              borderRadius: '10px',\n              boxShadow: '0 2px 6px rgba(0, 0, 0, 0.08)',\n              marginBottom: '10px',\n              transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n              overflow: 'hidden'\n            }\"\n          >\n            \n            <div class=\"pack-header\" :style=\"{\n              display: 'flex',\n              alignItems: 'flex-start',\n              justifyContent: 'space-between',\n              gap: '10px',\n              marginBottom: '10px'\n            }\">\n              <div class=\"pack-title-section\" :style=\"{\n                display: 'flex',\n                alignItems: 'flex-start',\n                gap: '10px',\n                flex: '1'\n              }\">\n                <div class=\"pack-icon\" :style=\"{ fontSize: '1.6em', lineHeight: '1' }\">üì¶</div>\n                <div class=\"pack-name-wrapper\" :style=\"{\n                  display: 'flex',\n                  flexDirection: 'column',\n                  gap: '6px',\n                  minWidth: '0'\n                }\">\n                  <strong class=\"pack-name\" :style=\"{\n                    fontSize: '1em',\n                    color: '#202122',\n                    wordBreak: 'break-word'\n                  }\">{{ pack.name }}</strong>\n                  <div class=\"pack-meta-row\" :style=\"{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '6px',\n                    flexWrap: 'wrap'\n                  }\">\n                    <span \n                      v-if=\"pack.state.auto_selected_reason\" \n                      class=\"pack-badge auto\"\n                      :title=\"pack.state.auto_selected_reason\"\n                      :style=\"{\n                        fontSize: '0.7em',\n                        padding: '3px 8px',\n                        borderRadius: '5px',\n                        fontWeight: '600',\n                        background: 'linear-gradient(135deg, #fef6e7 0%, #fff8e1 100%)',\n                        color: '#ac6600',\n                        border: '1px solid #f0d86f',\n                        whiteSpace: 'nowrap'\n                      }\"\n                    >\n                      ü§ñ Auto\n                    </span>\n                    <span v-else class=\"pack-badge manual\" :style=\"{\n                      fontSize: '0.7em',\n                      padding: '3px 8px',\n                      borderRadius: '5px',\n                      fontWeight: '600',\n                      background: 'linear-gradient(135deg, #eaf3ff 0%, #f0f6ff 100%)',\n                      color: '#36c',\n                      border: '1px solid #a8c9f0',\n                      whiteSpace: 'nowrap'\n                    }\">\n                      ‚úã Manual\n                    </span>\n                    <span class=\"action-badge\" :style=\"{\n                      fontSize: '0.7em',\n                      padding: '3px 10px',\n                      borderRadius: '5px',\n                      fontWeight: '700',\n                      textTransform: 'uppercase',\n                      letterSpacing: '0.3px',\n                      whiteSpace: 'nowrap',\n                      background: pack.state.action === 'install' ? 'linear-gradient(135deg, #d5fdf0 0%, #e8fff8 100%)' :\n                                  pack.state.action === 'update' ? 'linear-gradient(135deg, #fff4e5 0%, #fff8ed 100%)' :\n                                  pack.state.action === 'remove' ? 'linear-gradient(135deg, #fee7e6 0%, #fff0ef 100%)' :\n                                  '#f8f9fa',\n                      color: pack.state.action === 'install' ? '#14866d' :\n                             pack.state.action === 'update' ? '#ac6600' :\n                             pack.state.action === 'remove' ? '#d33' :\n                             '#54595d',\n                      border: pack.state.action === 'install' ? '1px solid #7fd4bf' :\n                              pack.state.action === 'update' ? '1px solid #f0c77e' :\n                              pack.state.action === 'remove' ? '1px solid #faa' :\n                              '1px solid #c8ccd1'\n                    }\">\n                      {{ getActionIcon(pack.state.action) }} {{ pack.state.action }}\n                    </span>\n                  </div>\n                </div>\n              </div>\n              \n              <!-- Operation Status Badge -->\n              <div v-if=\"packStatuses[pack.name]\" class=\"operation-status\" :style=\"{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '6px',\n                padding: '5px 12px',\n                borderRadius: '16px',\n                fontSize: '0.8em',\n                fontWeight: '700',\n                whiteSpace: 'nowrap',\n                flexShrink: '0',\n                background: packStatuses[pack.name] === 'pending' ? 'linear-gradient(135deg, #f8f9fa 0%, #eaecf0 100%)' :\n                            packStatuses[pack.name] === 'running' ? 'linear-gradient(135deg, #3366cc 0%, #447ff5 100%)' :\n                            packStatuses[pack.name] === 'complete' ? 'linear-gradient(135deg, #14866d 0%, #00af89 100%)' :\n                            'linear-gradient(135deg, #d33 0%, #ff4444 100%)',\n                color: packStatuses[pack.name] === 'pending' ? '#54595d' : 'white',\n                boxShadow: '0 2px 8px rgba(0, 0, 0, 0.15)',\n                animation: packStatuses[pack.name] === 'running' ? 'pulse 2s ease-in-out infinite' : 'none'\n              }\">\n                <span v-if=\"packStatuses[pack.name] === 'pending'\" :style=\"{ fontSize: '1.2em' }\">‚è≥</span>\n                <span v-else-if=\"packStatuses[pack.name] === 'running'\" class=\"status-icon spinning\" :style=\"{ fontSize: '1.2em' }\">‚öôÔ∏è</span>\n                <span v-else-if=\"packStatuses[pack.name] === 'complete'\" :style=\"{ fontSize: '1.2em' }\">‚úÖ</span>\n                <span v-else-if=\"packStatuses[pack.name] === 'failed'\" :style=\"{ fontSize: '1.2em' }\">‚ùå</span>\n                <span class=\"status-text\" :style=\"{ fontWeight: '700' }\">{{ getStatusText(packStatuses[pack.name]) }}</span>\n              </div>\n            </div>\n            \n            <div class=\"pack-info-grid\" :style=\"{\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(110px, 1fr))',\n              gap: '8px',\n              paddingTop: '10px',\n              marginTop: '2px',\n              borderTop: '1px solid #eaecf0'\n            }\">\n              <div v-if=\"pack.state.target_version\" class=\"info-item\" :style=\"{\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '4px',\n                padding: '6px 10px',\n                background: '#f8f9fa',\n                borderRadius: '6px',\n                border: '1px solid #eaecf0'\n              }\">\n                <span class=\"info-label\" :style=\"{\n                  fontSize: '0.65em',\n                  color: '#72777d',\n                  fontWeight: '700',\n                  textTransform: 'uppercase',\n                  letterSpacing: '0.4px'\n                }\">Version</span>\n                <span class=\"info-value\" :style=\"{\n                  fontSize: '0.88em',\n                  color: '#202122',\n                  fontWeight: '600'\n                }\">{{ pack.state.target_version }}</span>\n              </div>\n              <div v-if=\"pack.state.prefix\" class=\"info-item\" :style=\"{\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '4px',\n                padding: '6px 10px',\n                background: '#f8f9fa',\n                borderRadius: '6px',\n                border: '1px solid #eaecf0'\n              }\">\n                <span class=\"info-label\" :style=\"{\n                  fontSize: '0.65em',\n                  color: '#72777d',\n                  fontWeight: '700',\n                  textTransform: 'uppercase',\n                  letterSpacing: '0.4px'\n                }\">Prefix</span>\n                <span class=\"info-value code\" :style=\"{\n                  fontSize: '0.85em',\n                  color: '#202122',\n                  fontWeight: '500',\n                  fontFamily: 'Monaco, Menlo, Consolas, monospace',\n                  background: 'white',\n                  padding: '3px 6px',\n                  borderRadius: '3px',\n                  border: '1px solid #c8ccd1'\n                }\">{{ pack.state.prefix }}</span>\n              </div>\n              <div v-if=\"pack.pageCount > 0\" class=\"info-item\" :style=\"{\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '6px',\n                padding: '6px 10px',\n                background: '#f8f9fa',\n                borderRadius: '6px',\n                border: '1px solid #eaecf0',\n                gridColumn: pack.state.prefix ? 'span 1' : 'span 2'\n              }\">\n                <span class=\"info-label\" :style=\"{\n                  fontSize: '0.65em',\n                  color: '#72777d',\n                  fontWeight: '700',\n                  textTransform: 'uppercase',\n                  letterSpacing: '0.4px'\n                }\">Pages ({{ pack.pageCount }})</span>\n                <div class=\"pages-list\" :style=\"{\n                  display: 'flex',\n                  flexDirection: 'column',\n                  gap: '3px'\n                }\">\n                  <div \n                    v-for=\"(pageState, pageName) in pack.state.pages\" \n                    :key=\"pageName\"\n                    :style=\"{\n                      fontSize: '0.75em',\n                      color: '#202122',\n                      padding: '2px 4px',\n                      background: 'white',\n                      borderRadius: '3px',\n                      border: '1px solid #eaecf0',\n                      fontFamily: 'Monaco, Menlo, Consolas, monospace',\n                      overflow: 'hidden',\n                      textOverflow: 'ellipsis',\n                      whiteSpace: 'nowrap'\n                    }\"\n                    :title=\"`${pageName} ‚Üí ${pageState.final_title}`\"\n                  >\n                    <span :style=\"{ color: '#72777d' }\">üìÑ</span>\n                    {{ pageState.final_title || pageName }}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div v-else class=\"empty-state\">\n        <div class=\"empty-icon\">üìã</div>\n        <p class=\"empty-text\">{{ $t('labkipackmanager-no-packs-selected') }}</p>\n        <p class=\"empty-hint\">Select packs from the hierarchy tree to see details here</p>\n      </div>\n      \n      <!-- Action Buttons -->\n      <div class=\"actions-section\">\n        <div class=\"action-buttons\">\n          <cdx-button\n            action=\"progressive\"\n            weight=\"primary\"\n            :disabled=\"store.busy || selectedPacks.length === 0\"\n            @click=\"onApply\"\n          >\n            ‚úì {{ $t('labkipackmanager-apply') }}\n          </cdx-button>\n          \n          <cdx-button\n            action=\"destructive\"\n            weight=\"quiet\"\n            :disabled=\"store.busy\"\n            @click=\"onClear\"\n          >\n            ‚úï {{ $t('labkipackmanager-clear') }}\n          </cdx-button>\n        </div>\n        \n        <!-- Operation Status -->\n        <cdx-message\n          v-if=\"operationMessage\"\n          type=\"success\"\n          :inline=\"true\"\n        >\n          {{ operationMessage }}\n        </cdx-message>\n        \n        <cdx-message\n          v-if=\"errorMessage\"\n          type=\"error\"\n          :inline=\"true\"\n        >\n          {{ errorMessage }}\n        </cdx-message>\n        \n        <!-- State Hash (Debug) -->\n        <div v-if=\"store.stateHash\" class=\"state-info\">\n          <small>{{ $t('labkipackmanager-state-hash') }}: <code>{{ store.stateHash }}</code></small>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, reactive } from 'vue';\nimport { CdxButton, CdxMessage } from '@wikimedia/codex';\nimport { store } from '../state/store';\nimport { packsAction, pollOperation } from '../api/endpoints';\nimport { mergeDiff } from '../state/merge';\nimport StateSyncModal from './StateSyncModal.vue';\n\nconst operationMessage = ref('');\nconst errorMessage = ref('');\nconst packStatuses = ref({}); // Track status of each pack during apply\n\nconst stateSyncModal = reactive({\n  visible: false,\n  message: '',\n  differences: {},\n  serverPacks: {},\n  serverHash: '',\n  reconcileCommands: [],\n  clientSnapshot: {},\n  attemptingReconcile: false,\n  reconcileMessage: '',\n});\n\nconst selectedPacks = computed(() => {\n  const packs = [];\n  \n  for (const [name, state] of Object.entries(store.packs)) {\n    // Show packs that have any action set (not 'unchanged')\n    // This includes install, update, and remove actions\n    if (state.action && state.action !== 'unchanged') {\n      packs.push({\n        name,\n        state,\n        pageCount: Object.keys(state.pages || {}).length,\n      });\n    }\n  }\n  \n  return packs;\n});\n\nasync function onApply() {\n  if (store.busy) return;\n  \n  try {\n    store.busy = true;\n    operationMessage.value = '';\n    errorMessage.value = '';\n    \n    // Initialize all selected packs as 'pending'\n    packStatuses.value = {};\n    for (const pack of selectedPacks.value) {\n      packStatuses.value[pack.name] = 'pending';\n    }\n    \n    // Step 1: Send apply command (queues background job)\n    operationMessage.value = 'Queueing pack operations...';\n    \n    const response = await packsAction({\n      command: 'apply',\n      repo_url: store.repoUrl,\n      ref: store.ref,\n      data: {\n        // Send current pack state with all the actions user has marked\n        packs: store.packs,\n        // Send state hash so backend can verify states are in sync\n        state_hash: store.stateHash,\n      },\n    });\n    \n    console.log('[onApply] Apply response:', response);\n\t\n\tif (!response.ok) {\n\t\tif (response.error === 'state_out_of_sync') {\n\t\t\thandleStateOutOfSync(response);\n\t\t\toperationMessage.value = 'State out of sync detected. Review differences below.';\n\t\t\tmarkAllStatuses('failed');\n\t\t\treturn;\n\t\t}\n\t\tthrow new Error(response.message || 'Apply command failed');\n\t}\n    \n    // Merge diff (session state is cleared by backend)\n\tif (response.diff) {\n    mergeDiff(store.packs, response.diff);\n\t} else {\n\t\t// When backend returns no diff (should not happen), ensure packs are cleared\n\t\tfor (const key of Object.keys(store.packs)) delete store.packs[key];\n\t}\n\tif (response.state_hash) {\n    store.stateHash = response.state_hash;\n\t}\n\tstore.warnings = response.warnings ?? [];\n    \n    // Step 2: If we got an operation_id, poll for completion\n    if (response.operation?.operation_id) {\n      const operationId = response.operation.operation_id;\n      console.log(`[onApply] Polling operation ${operationId}...`);\n      \n      // Poll with status updates\n      await pollOperation(\n        operationId,\n        120, // 2 minutes max (pack operations can be slower)\n        1000,\n        (status) => {\n          // Update message based on operation status\n          if (status.message) {\n            operationMessage.value = status.message;\n            \n            // Parse message to update pack statuses\n            updatePackStatusFromMessage(status.message);\n          } else if (status.status === 'queued') {\n            operationMessage.value = 'Waiting for job to start...';\n          } else if (status.status === 'running') {\n            operationMessage.value = `Applying packs... (${status.progress || 0}%)`;\n          }\n        }\n      );\n      \n      console.log('[onApply] Operation completed successfully');\n      \n      // Mark all remaining as complete\n      for (const packName in packStatuses.value) {\n        if (packStatuses.value[packName] !== 'failed') {\n          packStatuses.value[packName] = 'complete';\n        }\n      }\n      \n      operationMessage.value = 'All packs applied successfully!';\n      \n      // Clear statuses after a delay\n      setTimeout(() => {\n        packStatuses.value = {};\n      }, 3000);\n    } else {\n      // No operation queued (maybe no changes?)\n      operationMessage.value = $t('labkipackmanager-apply-success');\n      packStatuses.value = {};\n    }\n  } catch (e) {\n    console.error('[onApply] Error:', e);\n    errorMessage.value = e instanceof Error ? e.message : String(e);\n    operationMessage.value = '';\n    \n    // Mark all as failed\n\t\tmarkAllStatuses('failed');\n  } finally {\n    store.busy = false;\n  }\n}\n\nfunction markAllStatuses(status) {\n  for (const packName in packStatuses.value) {\n    packStatuses.value[packName] = status;\n  }\n}\n\nfunction handleStateOutOfSync(response) {\n  const rawCommands = Array.isArray(response.reconcile_commands) ? response.reconcile_commands : [];\n  const cleanedDifferences = sanitizeDifferences(response.differences, rawCommands);\n\n  stateSyncModal.visible = true;\n  stateSyncModal.message = response.message || 'Frontend and backend pack states are out of sync.';\n  stateSyncModal.differences = cleanedDifferences;\n  stateSyncModal.serverPacks = response.server_packs ? deepClone(response.server_packs) : {};\n  stateSyncModal.serverHash = response.state_hash || '';\n  stateSyncModal.reconcileCommands = filterReconcileCommands(rawCommands, cleanedDifferences);\n  stateSyncModal.clientSnapshot = deepClone(store.packs);\n  stateSyncModal.attemptingReconcile = false;\n  stateSyncModal.reconcileMessage = '';\n}\n\nfunction replaceStorePacks(newPacks) {\n  const target = store.packs;\n  for (const key of Object.keys(target)) {\n    delete target[key];\n  }\n  for (const [packName, packState] of Object.entries(newPacks)) {\n    target[packName] = packState;\n  }\n}\n\nfunction syncFrontendWithBackend() {\n  replaceStorePacks(stateSyncModal.serverPacks || {});\n  if (stateSyncModal.serverHash) {\n    store.stateHash = stateSyncModal.serverHash;\n  }\n  stateSyncModal.visible = false;\n  stateSyncModal.reconcileMessage = '';\n  operationMessage.value = 'Synced with backend state. Review selections before applying again.';\n}\n\nfunction closeStateSyncModal() {\n  stateSyncModal.visible = false;\n  stateSyncModal.reconcileMessage = '';\n}\n\nasync function reconcileAndReapply() {\n  if (stateSyncModal.attemptingReconcile) {\n    return;\n  }\n\n  try {\n    stateSyncModal.attemptingReconcile = true;\n    stateSyncModal.reconcileMessage = '';\n\n    if (stateSyncModal.reconcileCommands.length === 0) {\n      stateSyncModal.reconcileMessage =\n        'No automatic reconciliation steps are available. Please sync with the backend instead.';\n      stateSyncModal.attemptingReconcile = false;\n      return;\n    }\n\n    for (const command of stateSyncModal.reconcileCommands) {\n      const response = await packsAction({\n        command: command.command,\n        repo_url: store.repoUrl,\n        ref: store.ref,\n        data: command.data,\n      });\n\n      if (!response.ok) {\n        throw new Error(response.message || `Failed to execute ${command.command}`);\n      }\n\n      if (response.diff) {\n        mergeDiff(store.packs, response.diff);\n      }\n      if (response.state_hash) {\n        store.stateHash = response.state_hash;\n      }\n      if (response.warnings) {\n        store.warnings = response.warnings;\n      }\n    }\n\n    stateSyncModal.reconcileMessage = 'Differences reapplied successfully. Attempting apply again...';\n    stateSyncModal.attemptingReconcile = false;\n    stateSyncModal.visible = false;\n\n    await onApply();\n  } catch (err) {\n    console.error('[reconcileAndReapply] Error:', err);\n    stateSyncModal.reconcileMessage = err instanceof Error ? err.message : String(err);\n    stateSyncModal.attemptingReconcile = false;\n  }\n}\n\nfunction deepClone(value) {\n  if (value === undefined) {\n    return value;\n  }\n  return JSON.parse(JSON.stringify(value));\n}\n\nfunction sanitizeDifferences(differences, commands = []) {\n  const result = {};\n  if (!differences || typeof differences !== 'object') {\n    return result;\n  }\n\n  const allowedPacks = new Set(\n    commands\n      .map((command) => command?.data?.pack_name)\n      .filter((packName) => typeof packName === 'string' && packName !== '')\n  );\n  const restrictToAllowed = allowedPacks.size > 0;\n\n  for (const [packName, packDiff] of Object.entries(differences)) {\n    if (restrictToAllowed && !allowedPacks.has(packName)) {\n      continue;\n    }\n\n    const fields = packDiff?.fields ?? {};\n    const pages = packDiff?.pages ?? {};\n\n    const fieldEntries = Object.entries(fields ?? {});\n\n    const filteredPages = {};\n    for (const [pageName, pageDiff] of Object.entries(pages ?? {})) {\n      const pageFields = Object.entries(pageDiff ?? {});\n      if (pageFields.length > 0) {\n        filteredPages[pageName] = pageDiff;\n      }\n    }\n\n    if (fieldEntries.length > 0 || Object.keys(filteredPages).length > 0) {\n      result[packName] = {\n        ...(fieldEntries.length > 0 ? { fields } : {}),\n        ...(Object.keys(filteredPages).length > 0 ? { pages: filteredPages } : {}),\n      };\n    }\n  }\n\n  return result;\n}\n\nfunction filterReconcileCommands(commands, differences) {\n  const packs = new Set(Object.keys(differences));\n  return commands.filter((command) => {\n    const packName = command?.data?.pack_name;\n    if (!packName) {\n      return true;\n    }\n    return packs.has(packName);\n  });\n}\n\nfunction updatePackStatusFromMessage(message) {\n  // Parse backend messages to update pack statuses\n  // Messages like: \"Installing pack: People\", \"Removing pack: Miniscopes\", etc.\n  \n  const installMatch = message.match(/Installing pack[:\\s]+(.+)/i);\n  const updateMatch = message.match(/Updating pack[:\\s]+(.+)/i);\n  const removeMatch = message.match(/Removing pack[:\\s]+(.+)/i);\n  const completeMatch = message.match(/Completed pack[:\\s]+(.+)/i);\n  \n  if (installMatch || updateMatch || removeMatch) {\n    const packName = (installMatch || updateMatch || removeMatch)[1].trim();\n    if (packStatuses.value[packName] !== undefined) {\n      packStatuses.value[packName] = 'running';\n    }\n  } else if (completeMatch) {\n    const packName = completeMatch[1].trim();\n    if (packStatuses.value[packName] !== undefined) {\n      packStatuses.value[packName] = 'complete';\n    }\n  }\n}\n\nfunction getStatusText(status) {\n  switch (status) {\n    case 'pending': return 'Pending';\n    case 'running': return 'In Progress';\n    case 'complete': return 'Complete';\n    case 'failed': return 'Failed';\n    default: return '';\n  }\n}\n\nfunction getActionIcon(action) {\n  switch (action) {\n    case 'install': return '‚¨áÔ∏è';\n    case 'update': return 'üîÑ';\n    case 'remove': return 'üóëÔ∏è';\n    default: return '';\n  }\n}\n\nasync function onClear() {\n  if (store.busy) return;\n  \n  if (!confirm($t('labkipackmanager-clear-confirm'))) {\n    return;\n  }\n  \n  try {\n    store.busy = true;\n    operationMessage.value = '';\n    errorMessage.value = '';\n    \n    // Reset state before clear - like init, clear returns full initial state\n    store.packs = {};\n    store.warnings = [];\n    \n    const response = await packsAction({\n      command: 'clear',\n      repo_url: store.repoUrl,\n      ref: store.ref,\n      data: {},\n    });\n    \n    // For Clear, replace the entire packs state (don't merge)\n    // This ensures all actions are reset to their initial state\n    store.packs = response.diff;\n    store.stateHash = response.state_hash;\n    store.warnings = response.warnings;\n    \n    operationMessage.value = $t('labkipackmanager-clear-success');\n  } catch (e) {\n    errorMessage.value = e instanceof Error ? e.message : String(e);\n  } finally {\n    store.busy = false;\n  }\n}\n\n// Helper for i18n\nfunction $t(key) {\n  return mw.msg(key);\n}\n</script>\n\n<style scoped>\n/*\n  ============================================================================\n  DETAILS PANEL - CARD-BASED DESIGN WITH INLINE STYLES\n  ============================================================================\n  \n  Following the same pattern as TreeNode.vue:\n  \n  ‚ö†Ô∏è INLINE STYLES ARE REQUIRED for layout and visual styling!\n  \n  WHY: MediaWiki/Codex CSS has extremely high specificity that overrides\n       our stylesheet classes. Inline styles have highest specificity.\n  \n  - Pack cards use inline :style=\"\" bindings for all visual properties\n  - CSS classes here only provide base structure and animations\n  - Any layout-critical styling MUST be in :style=\"\" bindings\n  \n  ============================================================================\n*/\n\n.details-panel {\n  padding: 20px;\n  background: white;\n  border: 1px solid #c8ccd1;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n}\n\n.panel-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 14px;\n  padding-bottom: 12px;\n  border-bottom: 2px solid #eaecf0;\n}\n\n.panel-header h3 {\n  margin: 0;\n  font-size: 1.3em;\n  font-weight: 600;\n  color: #202122;\n}\n\n.pack-count-badge {\n  padding: 6px 14px;\n  background: linear-gradient(135deg, #3366cc 0%, #447ff5 100%);\n  color: white;\n  border-radius: 20px;\n  font-size: 0.85em;\n  font-weight: 600;\n  box-shadow: 0 2px 4px rgba(51, 102, 204, 0.2);\n}\n\n.panel-content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n/* ==================== SECTION HEADERS ==================== */\n\n.section-header {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 16px;\n}\n\n.section-icon {\n  font-size: 1.4em;\n  line-height: 1;\n}\n\n.section-header h4 {\n  margin: 0;\n  font-size: 1.1em;\n  font-weight: 600;\n  color: #202122;\n}\n\n/* ==================== WARNINGS SECTION ==================== */\n\n.warnings-section {\n  animation: slideIn 0.3s ease;\n}\n\n.warnings-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n/* ==================== PACK CARDS ==================== */\n/* Most styling is inline (see template), CSS here is for fallback/animations only */\n\n.packs-grid {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.pack-card:hover {\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1) !important;\n  transform: translateY(-3px);\n}\n\n.status-icon {\n  font-size: 1.1em;\n  line-height: 1;\n}\n\n.status-icon.spinning {\n  display: inline-block;\n  animation: spin 2s linear infinite;\n}\n\n.status-text {\n  font-weight: 600;\n}\n\n/* ==================== EMPTY STATE ==================== */\n\n.empty-state {\n  text-align: center;\n  padding: 40px 20px;\n  background: linear-gradient(135deg, #fafbfc 0%, #f8f9fa 100%);\n  border-radius: 8px;\n  border: 2px dashed #c8ccd1;\n}\n\n.empty-icon {\n  font-size: 3em;\n  margin-bottom: 10px;\n  opacity: 0.4;\n}\n\n.empty-text {\n  margin: 0 0 8px 0;\n  font-size: 1.1em;\n  font-weight: 600;\n  color: #54595d;\n}\n\n.empty-hint {\n  margin: 0;\n  font-size: 0.9em;\n  color: #72777d;\n}\n\n/* ==================== ACTIONS SECTION ==================== */\n\n.actions-section {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  padding-top: 16px;\n  border-top: 2px solid #eaecf0;\n}\n\n.action-buttons {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.action-buttons :deep(.cdx-button) {\n  border-radius: 8px;\n  font-weight: 600;\n  padding: 10px 20px;\n  transition: all 0.2s ease;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\n}\n\n.action-buttons :deep(.cdx-button:hover:not(:disabled)) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n.action-buttons :deep(.cdx-button:active:not(:disabled)) {\n  transform: translateY(0);\n}\n\n.state-info {\n  padding: 10px 14px;\n  background: linear-gradient(135deg, #f8f9fa 0%, #eaecf0 100%);\n  border-radius: 6px;\n  border: 1px solid #c8ccd1;\n}\n\n.state-info small {\n  color: #54595d;\n  font-size: 0.85em;\n}\n\n.state-info code {\n  font-family: 'Monaco', 'Menlo', 'Consolas', monospace;\n  font-size: 0.9em;\n  color: #202122;\n  background: white;\n  padding: 2px 6px;\n  border-radius: 3px;\n  border: 1px solid #c8ccd1;\n}\n\n/* ==================== ANIMATIONS ==================== */\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.8; }\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* ==================== RESPONSIVE ==================== */\n\n@media (max-width: 768px) {\n  .pack-header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  \n  .operation-status {\n    align-self: flex-start;\n  }\n  \n  .pack-info-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .action-buttons {\n    flex-direction: column;\n  }\n  \n  .action-buttons :deep(.cdx-button) {\n    width: 100%;\n  }\n  \n  .panel-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 12px;\n  }\n  \n  .pack-count-badge {\n    align-self: flex-start;\n  }\n}\n</style>\n\n\n\n\n","<template>\n  <div class=\"labki-pack-manager-app\">\n    <header class=\"app-header\">\n      <h1>{{ $t('labkipackmanager-special-title') }}</h1>\n      <p class=\"app-description\">{{ $t('labkipackmanager-special-description') }}</p>\n    </header>\n    \n    <div v-if=\"store.busy\" class=\"loading-overlay\">\n      <div class=\"loading-spinner\">\n        {{ $t('labkipackmanager-loading') }}...\n      </div>\n    </div>\n    \n    <main class=\"app-main\">\n      <repo-ref-selector />\n      \n      <mermaid-graph\n        v-if=\"store.repoUrl && store.ref\"\n        :mermaid-src=\"store.mermaidSrc\"\n      />\n      \n      <hierarchy-tree\n        v-if=\"store.repoUrl && store.ref\"\n        :hierarchy=\"store.hierarchy\"\n      />\n      \n      <details-panel\n        v-if=\"store.repoUrl && store.ref\"\n      />\n    </main>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted } from 'vue';\nimport { store } from '../state/store';\nimport RepoRefSelector from './RepoRefSelector.vue';\nimport MermaidGraph from './MermaidGraph.vue';\nimport HierarchyTree from './HierarchyTree.vue';\nimport DetailsPanel from './DetailsPanel.vue';\n\nonMounted(() => {\n  console.log('Labki Pack Manager initialized');\n});\n\n// Helper for i18n\nfunction $t(key) {\n  return mw.msg(key);\n}\n</script>\n\n<style scoped>\n.labki-pack-manager-app {\n  max-width: 1400px;\n  margin: 0 auto;\n  padding: 20px;\n  position: relative;\n}\n\n.app-header {\n  margin-bottom: 24px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid #eaecf0;\n}\n\n.app-header h1 {\n  margin: 0 0 8px 0;\n  font-size: 2em;\n  font-weight: 600;\n}\n\n.app-description {\n  margin: 0;\n  color: #54595d;\n  font-size: 1.05em;\n}\n\n.loading-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n\n.loading-spinner {\n  padding: 24px 48px;\n  background: white;\n  border: 2px solid #36c;\n  border-radius: 8px;\n  font-size: 1.2em;\n  color: #36c;\n  font-weight: 600;\n}\n\n.app-main {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n</style>\n\n",null],"names":["store","reactive","repoUrl","ref","mermaidSrc","hierarchy","packs","stateHash","warnings","busy","selectedRepo","repos","getApi","mw","Api","async","apiCall","fn","error","console","reposAdd","defaultRef","api","log","repo_url","default_ref","response","post","action","format","Object","keys","data","labkiReposAdd","graphGet","get","labkiGraphGet","graph","Error","hierarchyGet","labkiHierarchyGet","packsAction","payload","JSON","stringify","labkiPacksAction","operationStatus","operationId","operation_id","labkiOperationsStatus","status","pollOperation","maxAttempts","intervalMs","onProgress","attempt","progress","message","Promise","resolve","setTimeout","props","__props","emit","__emit","isOpen","computed","modelValue","set","value","urlError","statusMessage","isValid","trim","validateUrl","url","URL","match","msg","onSubmit","repoUrlValue","defaultRefValue","onCancel","e","String","$t","key","_createBlock","_unref","CdxDialog","open","$event","title","disabled","onPrimary","onDefault","_createElementVNode","_hoisted_1","_createVNode","CdxField","_createSlots","label","CdxTextInput","placeholder","_hoisted_2","_toDisplayString","CdxMessage","type","inline","refName","refNameValue","_createTextVNode","ADD_REPO_VALUE","ADD_REF_VALUE","selectedRepoUrl","selectedRefName","showAddRepoModal","showAddRefModal","syncMessage","syncInProgress","repoMenuItems","length","items","map","repo","push","refMenuItems","refs","ref_name","is_default","loadRepos","labkiReposList","meta","reposList","selectRepo","onRepoSelected","find","r","defaultRefObj","selectRef","onRefSelected","graphResponse","hierarchyResponse","all","lines","nodes","Set","edges","edge","containsEdges","add","from","to","dependsEdges","node","nodeId","escapeNodeName","prefix","nameParts","split","displayName","join","icon","fromNode","toNode","buildMermaidFromGraph","initResponse","command","diff","state_hash","onRepoAdded","eventData","onRefAdded","onSync","params","labkiReposSync","reposSync","name","replace","onMounted","_openBlock","_createElementBlock","_hoisted_3","CdxSelect","selected","_hoisted_4","_hoisted_5","_hoisted_6","CdxButton","weight","onClick","AddRepoModal","onAdded","AddRefModal","hasMermaid","mermaidPre","state","loader","getState","warn","checkMermaidAvailability","watch","nextTick","window","mermaid","initialize","startOnLoad","theme","securityLevel","svgs","querySelectorAll","forEach","svg","remove","innerHTML","removeAttribute","run","contentLoaded","triggerMermaidRender","class","mergeDiff","target","packName","packChanges","entries","existing","mergePack","dst","src","out","pages","pageName","pageChanges","existingPage","mergePage","expanded","prefixTimer","pageTimer","children","packState","isPackEditable","installed","showPackEditor","prefixInputValue","nodePackName","canUpdate","ps","current_version","target_version","subtreeHasAction","check","n","s","c","toggleExpanded","toggleAction","current","next","pack_name","toggleInstall","toggleRemove","toggleUpdate","onPrefixChange","val","clearTimeout","currentPrefixValue","input","document","querySelector","getCurrentPrefixValue","responsePrefix","sendSetPackPrefixCommand","handleRenamePageResponse","currentTextboxValue","editableValue","pack","prefixWithSlash","endsWith","getCurrentTextboxValue","responseFinalTitle","final_title","k","getPageState","parentPack","getPageBackground","pageState","getDisplayPrefix","getDisplayPrefixWithSlash","getPageEditableTitle","full","pref","startsWith","slice","getPageHasCollision","some","w","includes","getCollisionTooltip","filter","getPageEditable","onPageTitleChangeForPage","editable","newTitle","page_name","new_title","sendRenamePageCommand","depth","onBeforeUnmount","arr","ci","toLocaleLowerCase","sort","a","b","la","lb","childPages","child","childPacks","onChildrenEnter","el","style","height","opacity","offsetHeight","transition","scrollHeight","onChildrenLeave","_createCommentVNode","_normalizeClass","pageParentAction","_normalizeStyle","background","flex","toString","_cache","_hoisted_7","_hoisted_8","version","auto_selected_reason","_hoisted_9","_hoisted_10","fontSize","color","fontWeight","readonly","onInput","_hoisted_12","active","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_Fragment","_renderList","page","id","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_21","description","depends_on","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_Transition","onEnter","onLeave","_hoisted_26","_component_tree_node","onSetPackAction","$emit","sendCommand","pack_count","page_count","root_nodes","TreeNode","diffList","differences","packDiff","fieldChanges","fields","values","client","server","entry","isValuesEqual","pageDiff","changeCount","reduce","total","diffStyles","freeze","summary","border","borderRadius","padding","warningHeading","display","marginBottom","warningText","lineHeight","textTransform","alignItems","gap","minWidth","arrow","valueBase","fontFamily","wordBreak","valueClient","valueServer","valueText","whiteSpace","pillBase","letterSpacing","pillOld","pillNew","undefined","primaryAction","actionType","attemptingReconcile","defaultAction","onReconcile","reconcileCommands","formatDifferenceValue","formatFieldName","char","toUpperCase","_hoisted_11","field","pageField","reconcileMessage","operationMessage","errorMessage","packStatuses","stateSyncModal","visible","serverPacks","serverHash","clientSnapshot","selectedPacks","pageCount","onApply","ok","rawCommands","Array","isArray","reconcile_commands","cleanedDifferences","commands","result","allowedPacks","restrictToAllowed","size","has","fieldEntries","filteredPages","sanitizeDifferences","server_packs","deepClone","filterReconcileCommands","handleStateOutOfSync","markAllStatuses","operation","installMatch","updateMatch","removeMatch","completeMatch","updatePackStatusFromMessage","syncFrontendWithBackend","newPacks","replaceStorePacks","closeStateSyncModal","reconcileAndReapply","err","parse","getStatusText","getActionIcon","onClear","confirm","StateSyncModal","warning","index","_hoisted_20","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","RepoRefSelector","MermaidGraph","HierarchyTree","DetailsPanel","using","then","root","getElementById","createApp","App","mount","initApp","catch"],"mappings":"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"}