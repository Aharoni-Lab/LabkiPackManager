var Vue="undefined"!=typeof mw&&mw.loader&&mw.loader.require?mw.loader.require("vue"):window.Vue,Codex="undefined"!=typeof mw&&mw.loader&&mw.loader.require?mw.loader.require("@wikimedia/codex")||mw.loader.require("codex"):window.Codex,mermaid=function(){try{if("undefined"!=typeof window&&window.mermaid)return window.mermaid;if("undefined"!=typeof mw&&mw.loader&&mw.loader.require){var e=mw.loader.require("ext.mermaid");if(e?.initialize)return e;if(e?.mermaid?.initialize)return e.mermaid;if(e?.default?.initialize)return e.default}}catch(e){}return window.mermaid}();!function(e,a){"use strict";const t=e.reactive({repoUrl:"",ref:"",mermaidSrc:"",hierarchy:null,packs:{},stateHash:"",warnings:[],busy:!1,selectedRepo:null,repos:[]});function o(){return new mw.Api}async function n(e){try{return await e()}catch(e){throw console.error("API call failed:",e),e}}async function l(e,a){return n(async()=>{const t=o();console.log("[reposAdd] Sending request:",{repo_url:e,default_ref:a});const n=await t.post({action:"labkiReposAdd",format:"json",repo_url:e,default_ref:a});console.log("[reposAdd] Raw API response:",n),console.log("[reposAdd] Response keys:",Object.keys(n));const l=n.labkiReposAdd||n;return console.log("[reposAdd] Returning data:",l),l})}async function r(e,a){return n(async()=>{const t=o(),n=await t.get({action:"labkiGraphGet",format:"json",repo_url:e,ref:a});console.log("[graphGet] Response:",n);let l=n.labkiGraphGet;if(!l){if(!(n.graph&&n.repo_url&&n.ref))throw new Error("Invalid graphGet response structure");console.log("[graphGet] Using unwrapped response"),l=n}return l})}async function i(e,a){return n(async()=>{const t=o(),n=await t.get({action:"labkiHierarchyGet",format:"json",repo_url:e,ref:a});console.log("[hierarchyGet] Response:",n);let l=n.labkiHierarchyGet;if(!l){if(!(n.hierarchy&&n.repo_url&&n.ref))throw new Error("Invalid hierarchyGet response structure");console.log("[hierarchyGet] Using unwrapped response"),l=n}return l})}async function s(e){return n(async()=>{const a=o();console.log("[packsAction] Sending payload:",e);const t=await a.post({action:"labkiPacksAction",format:"json",payload:JSON.stringify(e)});console.log("[packsAction] Raw response:",t);let n=t.labkiPacksAction;if(!n)throw console.error("[packsAction] Cannot find labkiPacksAction in response:",JSON.stringify(t,null,2)),new Error("Invalid packsAction response structure");return console.log("[packsAction] Returning:",n),n})}async function c(e){return n(async()=>{const a=o(),t=await a.get({action:"labkiOperationsStatus",format:"json",operation_id:e});return console.log("[operationStatus] Raw response:",t),console.log("[operationStatus] Response keys:",Object.keys(t)),console.log("[operationStatus] status field:",t?.status),console.log("[operationStatus] operation_id field:",t?.operation_id),t})}async function d(e,a=60,t=1e3,o){console.log(`[pollOperation] Starting poll for ${e}`);for(let n=0;n<a;n++){const l=await c(e);if(console.log(`[pollOperation] Attempt ${n+1}/${a}, status: ${l.status}, progress: ${l.progress}%, message: ${l.message}`),o&&o(l),"success"===l.status)return console.log("[pollOperation] Operation completed successfully:",l),l;if("failed"===l.status)throw console.error("[pollOperation] Operation failed:",l.message),new Error(`Operation failed: ${l.message}`);n<a-1&&await new Promise(e=>setTimeout(e,t))}throw new Error(`Operation timed out after ${a} attempts`)}const p={class:"add-repo-form"},u={class:"error"};var m={__name:"AddRepoModal",props:{modelValue:Boolean},emits:["update:modelValue","added"],setup(t,{emit:o}){const n=t,r=o,i=e.computed({get:()=>n.modelValue,set:e=>r("update:modelValue",e)}),s=e.ref(""),c=e.ref("main"),m=e.ref(""),f=e.ref(""),g=e.ref(!1),k=e.ref(""),v=e.computed(()=>""!==s.value.trim()&&""!==c.value.trim()&&!m.value);function y(){m.value="";const e=s.value.trim();if(e)try{new URL(e),e.match(/^(https?|git|ssh):\/\//)||(m.value=mw.msg("labkipackmanager-error-invalid-protocol"))}catch{m.value=mw.msg("labkipackmanager-error-invalid-url")}}async function h(){if(v.value&&!g.value){g.value=!0,f.value="";try{const e=s.value.trim(),a=c.value.trim();k.value="Queueing repository initialization...";const t=await l(e,a);console.log("[AddRepoModal] reposAdd response:",t),console.log("[AddRepoModal] operation_id:",t?.operation_id),t?.operation_id?(console.log(`[AddRepoModal] Polling operation ${t.operation_id}...`),await d(t.operation_id,60,1e3,e=>{e.message?k.value=e.message:"queued"===e.status?k.value="Waiting for job to start...":"running"===e.status&&(k.value=`Initializing repository... (${e.progress||0}%)`)}),console.log("[AddRepoModal] Operation completed successfully"),k.value="Repository initialized successfully!"):(console.log("[AddRepoModal] No operation_id, repo may already exist"),k.value="Repository already exists"),r("added",{repoUrl:e,operationId:t?.operation_id||null}),await new Promise(e=>setTimeout(e,500)),b()}catch(e){console.error("[AddRepoModal] Error adding repo:",e),f.value=e instanceof Error?e.message:String(e),k.value=""}finally{g.value=!1}}}function b(){s.value="",c.value="main",m.value="",f.value="",k.value="",i.value=!1}function w(e){return mw.msg(e)}return(t,o)=>(e.openBlock(),e.createBlock(e.unref(a.CdxDialog),{open:i.value,"onUpdate:open":o[2]||(o[2]=e=>i.value=e),title:w("labkipackmanager-add-repo-title"),"primary-action":{label:w("labkipackmanager-add-repo-submit"),actionType:"progressive",disabled:g.value||!v.value},"default-action":{label:w("labkipackmanager-cancel")},onPrimary:h,onDefault:b},{default:e.withCtx(()=>[e.createElementVNode("div",p,[e.createVNode(e.unref(a.CdxField),{"is-fieldset":!1},e.createSlots({label:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(w("labkipackmanager-repo-url-label")),1)]),default:e.withCtx(()=>[e.createVNode(e.unref(a.CdxTextInput),{modelValue:s.value,"onUpdate:modelValue":[o[0]||(o[0]=e=>s.value=e),y],placeholder:w("labkipackmanager-repo-url-placeholder"),disabled:g.value},null,8,["modelValue","placeholder","disabled"])]),_:2},[m.value?{name:"help-text",fn:e.withCtx(()=>[e.createElementVNode("span",u,e.toDisplayString(m.value),1)]),key:"0"}:void 0]),1024),e.createVNode(e.unref(a.CdxField),{"is-fieldset":!1},{label:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(w("labkipackmanager-default-ref-label")),1)]),default:e.withCtx(()=>[e.createVNode(e.unref(a.CdxTextInput),{modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=e=>c.value=e),placeholder:w("labkipackmanager-default-ref-placeholder"),disabled:g.value},null,8,["modelValue","placeholder","disabled"])]),_:1}),k.value&&!f.value?(e.openBlock(),e.createBlock(e.unref(a.CdxMessage),{key:0,type:"notice",inline:!0},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(k.value),1)]),_:1})):e.createCommentVNode("v-if",!0),f.value?(e.openBlock(),e.createBlock(e.unref(a.CdxMessage),{key:1,type:"error",inline:!0},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(f.value),1)]),_:1})):e.createCommentVNode("v-if",!0)])]),_:1},8,["open","title","primary-action","default-action"]))},__scopeId:"data-v-0cf6aec2",__file:"resources/src/ui/AddRepoModal.vue"};const f={class:"add-ref-form"},g={class:"repo-info"};var k={__name:"AddRefModal",props:{modelValue:Boolean,repoUrl:String},emits:["update:modelValue","added"],setup(t,{emit:o}){const n=t,r=o,i=e.computed({get:()=>n.modelValue,set:e=>r("update:modelValue",e)}),s=e.ref(""),c=e.ref(""),p=e.ref(!1),u=e.ref(""),m=e.computed(()=>""!==s.value.trim());async function k(){if(m.value&&!p.value){p.value=!0,c.value="";try{const e=s.value.trim();u.value="Queueing ref initialization...";const a=await l(n.repoUrl,e);console.log("[AddRefModal] reposAdd response:",a),console.log("[AddRefModal] Response keys:",Object.keys(a||{})),console.log("[AddRefModal] operation_id:",a?.operation_id),console.log("[AddRefModal] labkiReposAdd:",a?.labkiReposAdd),a?.operation_id?(console.log(`[AddRefModal] Polling operation ${a.operation_id}...`),await d(a.operation_id,60,1e3,e=>{e.message?u.value=e.message:"queued"===e.status?u.value="Waiting for job to start...":"running"===e.status&&(u.value=`Creating worktree... (${e.progress||0}%)`)}),console.log("[AddRefModal] Operation completed successfully"),u.value="Ref initialized successfully!"):(console.log("[AddRefModal] No operation_id, ref may already exist"),u.value="Ref already exists"),r("added",{refName:e,operationId:a?.operation_id||null}),await new Promise(e=>setTimeout(e,500)),v()}catch(e){console.error("[AddRefModal] Error adding ref:",e),c.value=e instanceof Error?e.message:String(e),u.value=""}finally{p.value=!1}}}function v(){s.value="",c.value="",u.value="",i.value=!1}function y(e){return mw.msg(e)}return(o,n)=>(e.openBlock(),e.createBlock(e.unref(a.CdxDialog),{open:i.value,"onUpdate:open":n[1]||(n[1]=e=>i.value=e),title:y("labkipackmanager-add-ref-title"),"primary-action":{label:y("labkipackmanager-add-ref-submit"),actionType:"progressive",disabled:p.value||!m.value},"default-action":{label:y("labkipackmanager-cancel")},onPrimary:k,onDefault:v},{default:e.withCtx(()=>[e.createElementVNode("div",f,[e.createElementVNode("p",g,[e.createElementVNode("strong",null,e.toDisplayString(y("labkipackmanager-repository"))+":",1),e.createTextVNode(" "+e.toDisplayString(t.repoUrl),1)]),e.createVNode(e.unref(a.CdxField),{"is-fieldset":!1},{label:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(y("labkipackmanager-ref-name-label")),1)]),default:e.withCtx(()=>[e.createVNode(e.unref(a.CdxTextInput),{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=e=>s.value=e),placeholder:y("labkipackmanager-ref-name-placeholder"),disabled:p.value},null,8,["modelValue","placeholder","disabled"])]),_:1}),u.value&&!c.value?(e.openBlock(),e.createBlock(e.unref(a.CdxMessage),{key:0,type:"notice",inline:!0},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1})):e.createCommentVNode("v-if",!0),c.value?(e.openBlock(),e.createBlock(e.unref(a.CdxMessage),{key:1,type:"error",inline:!0},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("v-if",!0)])]),_:1},8,["open","title","primary-action","default-action"]))},__scopeId:"data-v-f029ab7a",__file:"resources/src/ui/AddRefModal.vue"};const v={class:"repo-ref-selector"},y={class:"selector-row",style:{display:"flex",gap:"24px","flex-wrap":"nowrap"}},h={class:"selector-field",style:{flex:"1 1 0","min-width":"0"}},b={class:"selector-field",style:{flex:"1 1 0","min-width":"0"}},w={key:0,class:"current-selection"},N="__add_new_repo__",_="__add_new_ref__";var V={__name:"RepoRefSelector",setup(l){const c=e.ref(""),d=e.ref(""),p=e.ref(!1),u=e.ref(!1),f=e.ref(""),g=e.computed(()=>{if(console.log("Computing repoMenuItems, store.repos:",t.repos),!t.repos||0===t.repos.length)return[{label:"Loading...",value:"",disabled:!0}];const e=t.repos.map(e=>({label:e.repo_url,value:e.repo_url}));return e.push({label:"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€",value:"__separator__",disabled:!0}),e.push({label:T("labkipackmanager-add-repo-option"),value:N}),e}),V=e.computed(()=>{if(!t.selectedRepo)return[];const e=t.selectedRepo.refs.map(e=>({label:`${e.ref_name} ${e.is_default?"(default)":""}`,value:e.ref}));return e.push({label:"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€",value:"__separator__",disabled:!0}),e.push({label:T("labkipackmanager-add-ref-option"),value:_}),e});async function E(){try{console.log("[loadRepos] Starting..."),t.busy=!0,f.value="",console.log("[loadRepos] Calling reposList API...");const e=await async function(){return n(async()=>{console.log("[reposList] Starting API call...");const e=o();console.log("[reposList] API instance:",e);const a=await e.get({action:"labkiReposList",format:"json"});if(console.log("[reposList] Raw API response:",a),console.log("[reposList] Response keys:",Object.keys(a)),!a)throw new Error("No response from API");let t=a.labkiReposList;if(!t){if(!a.repos||!a.meta)throw console.error("[reposList] Cannot find repos data in response:",JSON.stringify(a,null,2)),new Error("Invalid API response structure - no labkiReposList field and no repos field");console.log("[reposList] Response appears to be unwrapped, using directly"),t=a}return console.log("[reposList] Data structure:",t),console.log("[reposList] Returning:",t),t})}();if(console.log("[loadRepos] API response received:",e),!e)throw new Error("No response from reposList API");if(!e.repos)throw new Error("Invalid response structure - no repos field. Response: "+JSON.stringify(e));console.log("[loadRepos] Setting store.repos:",e.repos),t.repos=e.repos,console.log("[loadRepos] store.repos is now:",t.repos),console.log("[loadRepos] store.repos.length:",t.repos.length),t.repos.length>0&&!c.value&&(console.log("[loadRepos] Auto-selecting first repo:",t.repos[0].repo_url),await x(t.repos[0].repo_url))}catch(e){console.error("[loadRepos] Error:",e),f.value=e instanceof Error?e.message:String(e)}finally{t.busy=!1,console.log("[loadRepos] Finished. store.busy:",t.busy,"store.repos:",t.repos)}}async function C(e){if(e===N)return p.value=!0,void(c.value=t.repoUrl);"string"==typeof e&&e&&"__separator__"!==e&&await x(e)}async function x(e){try{t.busy=!0,f.value="",c.value=e,t.repoUrl=e;const a=t.repos.find(a=>a.repo_url===e);if(!a)throw new Error(T("labkipackmanager-error-repo-not-found"));t.selectedRepo=a;const o=a.refs.find(e=>e.is_default),n=o?.ref||a.refs[0]?.ref;n&&await B(n)}catch(e){f.value=e instanceof Error?e.message:String(e)}finally{t.busy=!1}}async function S(e){if(e===_)return u.value=!0,void(d.value=t.ref);"string"==typeof e&&e&&"__separator__"!==e&&await B(e)}async function B(e){try{t.busy=!0,f.value="",d.value=e,t.ref=e,t.packs={},t.warnings=[];const[a,o]=await Promise.all([r(t.repoUrl,t.ref),i(t.repoUrl,t.ref)]);t.mermaidSrc=function(e){const a=["graph TD"],t=new Set,o=[];for(const a of e.containsEdges||[])t.add(a.from),t.add(a.to),o.push({from:a.from,to:a.to,type:"contains"});for(const a of e.dependsEdges||[])t.add(a.from),t.add(a.to),o.push({from:a.from,to:a.to,type:"depends"});for(const e of t){const t=A(e),[o,...n]=e.split(":"),l=n.join(":"),r="page"===o?"ðŸ“„":"ðŸ“¦";a.push(`  ${t}["${r} ${l}"]`)}for(const e of o){const t=A(e.from),o=A(e.to);"depends"===e.type?a.push(`  ${t} -.-> ${o}`):a.push(`  ${t} --\x3e ${o}`)}const n=a.join("\n");return console.log("[buildMermaidFromGraph] Generated Mermaid syntax:\n",n),n}(a.graph),t.hierarchy=o.hierarchy;const n=await s({command:"init",repo_url:t.repoUrl,ref:t.ref,data:{}});t.packs=n.diff,t.stateHash=n.state_hash,t.warnings=n.warnings}catch(e){f.value=e instanceof Error?e.message:String(e)}finally{t.busy=!1}}async function R(e){try{t.busy=!0,f.value="";const{repoUrl:a}=e;console.log(`[onRepoAdded] Repo '${a}' initialized, reloading repos and selecting...`),await E(),await x(a),console.log("[onRepoAdded] Repo selected successfully")}catch(e){console.error("[onRepoAdded] Error:",e),f.value=e instanceof Error?e.message:String(e)}finally{t.busy=!1}}async function D(e){try{t.busy=!0,f.value="";const{refName:a}=e;console.log(`[onRefAdded] Ref '${a}' initialized, reloading repos and selecting...`),await E(),await B(a),console.log("[onRefAdded] Ref selected successfully")}catch(e){console.error("[onRefAdded] Error:",e),f.value=e instanceof Error?e.message:String(e)}finally{t.busy=!1}}function A(e){return e.replace(/[^a-zA-Z0-9_]/g,"_")}function T(e){return mw.msg(e)}return e.onMounted(async()=>{console.log("RepoRefSelector mounted, store:",t),await E()}),(o,n)=>(e.openBlock(),e.createElementBlock("div",v,[e.createElementVNode("h2",null,e.toDisplayString(T("labkipackmanager-select-source")),1),e.createElementVNode("div",y,[e.createElementVNode("div",h,[e.createVNode(e.unref(a.CdxField),null,{label:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(T("labkipackmanager-repo-selector-label")),1)]),default:e.withCtx(()=>[e.createVNode(e.unref(a.CdxSelect),{selected:c.value,"onUpdate:selected":[n[0]||(n[0]=e=>c.value=e),C],"menu-items":g.value,disabled:e.unref(t).busy},null,8,["selected","menu-items","disabled"])]),_:1})]),e.createElementVNode("div",b,[e.createVNode(e.unref(a.CdxField),null,{label:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(T("labkipackmanager-ref-selector-label")),1)]),default:e.withCtx(()=>[e.createVNode(e.unref(a.CdxSelect),{selected:d.value,"onUpdate:selected":[n[1]||(n[1]=e=>d.value=e),S],"menu-items":V.value,disabled:e.unref(t).busy||!c.value},null,8,["selected","menu-items","disabled"])]),_:1})])]),c.value&&d.value?(e.openBlock(),e.createElementBlock("div",w,[e.createElementVNode("strong",null,e.toDisplayString(T("labkipackmanager-current-selection"))+":",1),e.createTextVNode(" "+e.toDisplayString(c.value)+" @ "+e.toDisplayString(d.value),1)])):e.createCommentVNode("v-if",!0),f.value?(e.openBlock(),e.createBlock(e.unref(a.CdxMessage),{key:1,type:"error",inline:!0},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(f.value),1)]),_:1})):e.createCommentVNode("v-if",!0),e.createVNode(m,{modelValue:p.value,"onUpdate:modelValue":n[2]||(n[2]=e=>p.value=e),onAdded:R},null,8,["modelValue"]),e.createVNode(k,{modelValue:u.value,"onUpdate:modelValue":n[3]||(n[3]=e=>u.value=e),"repo-url":c.value,onAdded:D},null,8,["modelValue","repo-url"])]))},__scopeId:"data-v-a9c77630",__file:"resources/src/ui/RepoRefSelector.vue"};const E={class:"mermaid-graph-container"},C={key:0,class:"no-mermaid-message"},x={key:1,class:"mermaid-wrapper"},S={key:2,class:"no-graph-message"};var B={__name:"MermaidGraph",props:{mermaidSrc:String},setup(t){const o=t,n=e.ref(!1),l=e.ref(null);function r(e){return mw.msg(e)}return e.onMounted(()=>{!function(){const e=mw.loader.getState("ext.mermaid");n.value="ready"===e||"loaded"===e||"loading"===e,n.value?console.log("[MermaidGraph] Mermaid extension is available, state:",e):console.warn("Mermaid extension is not available")}()}),e.watch(()=>o.mermaidSrc,async()=>{n.value&&o.mermaidSrc&&(await e.nextTick(),function(){if(console.log("[MermaidGraph] Triggering Mermaid render"),"undefined"!=typeof window&&window.mermaid)try{if("function"==typeof window.mermaid.initialize&&(console.log("[MermaidGraph] Calling mermaid.initialize()"),window.mermaid.initialize({startOnLoad:!1,theme:"forest",securityLevel:"loose"})),l.value){const e=l.value.querySelectorAll("svg");e.forEach(e=>e.remove()),console.log("[MermaidGraph] Removed",e.length,"existing SVG(s)"),l.value.innerHTML=o.mermaidSrc,l.value.removeAttribute("data-processed")}setTimeout(()=>{console.log("[MermaidGraph] Attempting to render mermaid diagrams"),"function"==typeof window.mermaid.run?(window.mermaid.run(),console.log("[MermaidGraph] Called mermaid.run()")):"function"==typeof window.mermaid.contentLoaded&&(window.mermaid.contentLoaded(),console.log("[MermaidGraph] Called mermaid.contentLoaded()"))},100)}catch(e){console.error("[MermaidGraph] Failed to trigger mermaid render:",e)}else console.warn("[MermaidGraph] window.mermaid not available")}())}),(o,i)=>(e.openBlock(),e.createElementBlock("div",E,[e.createElementVNode("h3",null,e.toDisplayString(r("labkipackmanager-graph-title")),1),n.value?t.mermaidSrc?(e.openBlock(),e.createElementBlock("div",x,[e.createElementVNode("pre",{class:"mermaid",ref_key:"mermaidPre",ref:l},e.toDisplayString(t.mermaidSrc),513)])):(e.openBlock(),e.createElementBlock("div",S,[e.createElementVNode("p",null,e.toDisplayString(r("labkipackmanager-no-graph-loaded")),1)])):(e.openBlock(),e.createElementBlock("div",C,[e.createVNode(e.unref(a.CdxMessage),{type:"warning",inline:!0},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r("labkipackmanager-mermaid-not-installed")),1)]),_:1})]))]))}};function R(e,a){for(const[t,o]of Object.entries(a)){const a=e[t]??{};e[t]=D(a,o)}}function D(e,a){const t={...e,...a};if(a.pages){t.pages={...e.pages??{}};for(const[e,o]of Object.entries(a.pages)){const a=t.pages[e]??{};t.pages[e]=A(a,o)}}return t}function A(e,a){return{...e,...a}}B.__scopeId="data-v-04226ecd",B.__file="resources/src/ui/MermaidGraph.vue";const T=["data-type","data-action","data-installed"],I=["data-depth"],M=["aria-expanded","aria-label"],L={key:1,class:"toggle-spacer"},P={class:"name-section"},O=["title"],U={key:0,class:"badge version"},$=["title"],H={key:2,class:"badge update"},G={key:2,class:"prefix-editor-inline"},z=["value","placeholder","disabled","readonly"],j={class:"actions"},F={key:0,class:"action-item"},q={key:1,class:"action-item"},W={key:2,class:"action-item"},Y={key:0,class:"meta-row"},Q={class:"meta-content"},J={key:0,class:"desc"},K={key:1,class:"depends"},Z={key:0,class:"children",style:{marginTop:"12px",paddingLeft:"20px",borderLeft:"2px solid #eaecf0",paddingTop:"8px"}},X={class:"label"},ee={key:0,class:"page-rename-inline"},ae={key:0,class:"prefix-chip-inline"},te=["value","placeholder","disabled","readonly","aria-invalid","aria-describedby"],oe=["id","title"];var ne={__name:"TreeNode",props:{node:{type:Object,required:!0},depth:{type:Number,required:!0},parentPackName:{type:String,default:null}},emits:["set-pack-action"],setup(o,{emit:n}){const l=o,r=n,i=e.ref(!1);let c=null,d=null;const p=e.computed(()=>!(!l.node.children||!l.node.children.length)),u=e.computed(()=>"pack"===l.node.type&&t.packs[l.node.label]||null);e.computed(()=>{const e=u.value?.action;return e&&"unchanged"!==e});const m=e.computed(()=>{const e=u.value?.action,a=u.value?.installed;return"install"===e&&!a}),f=e.computed(()=>{const e=u.value?.action,a=u.value?.installed;return"install"===e||"update"===e||a}),g=e.computed(()=>u.value?.prefix||""),k=e.computed(()=>"pack"===l.node.type?l.node.label:null),v=e.computed(()=>"page"===l.node.type&&l.parentPackName||null),y=e.computed(()=>v.value&&t.packs[v.value]||null),h=e.computed(()=>y.value?.pages&&y.value.pages[l.node.label]||null);e.computed(()=>{const e=y.value?.action;return"install"===e||"update"===e});const b=e.computed(()=>{const e=y.value?.action,a=h.value?.installed;return"install"===e&&!a}),w=e.computed(()=>{const e=y.value?.action,a=h.value?.installed;return"install"===e||"update"===e||a}),N=e.computed(()=>y.value?.action||"unchanged"),_=e.computed(()=>y.value?.prefix||""),V=e.computed(()=>_.value?_.value.endsWith("/")?_.value:_.value+"/":""),E=e.computed(()=>{const e=h.value?.final_title||"",a=V.value;return a&&e.startsWith(a)?e.slice(a.length):e}),C=e.computed(()=>{const e=h.value?.final_title;return!(!e||!v.value)&&t.warnings.some(a=>a.includes(e)&&a.includes(v.value))}),x=e.computed(()=>{const e=h.value?.final_title;return e&&v.value?t.warnings.filter(a=>a.includes(e)&&a.includes(v.value)).join("\n"):""}),S=e.computed(()=>`collision-${v.value||"none"}-${l.node.label}`),B=e.computed(()=>{const e=u.value;return!!e&&(null!==e.current_version&&(!!e.target_version&&e.target_version>e.current_version))});"pack"===l.node.type&&e.watch(()=>u.value?.action,(e,a)=>{console.log(`[TreeNode:${l.node.label}] packState.action changed: "${a}" -> "${e}"`)});const D=e.computed(()=>{t.stateHash;const e=a=>{if("pack"===a.type){const e=t.packs[a.label];if(e&&e.action&&"unchanged"!==e.action)return!0}if(!a.children)return!1;for(const t of a.children)if(e(t))return!0;return!1};return e(l.node)});function A(){i.value=!i.value}function ne(e){const a=u.value?.action,t=a===e?"unchanged":e;console.log(`[TreeNode:${l.node.label}] toggleAction: current="${a}", requested="${e}", next="${t}"`),console.log(`[TreeNode:${l.node.label}] packState:`,u.value),r("set-pack-action",{pack_name:l.node.label,action:t})}function le(){ne("install")}function re(){ne("remove")}function ie(){ne("update")}function se(e){if(!m.value)return;const a=e.target.value;c&&clearTimeout(c),c=setTimeout(()=>async function(e){if(t.busy)return;try{t.busy=!0;const a=await s({command:"set_pack_prefix",repo_url:t.repoUrl,ref:t.ref,data:{pack_name:l.node.label,prefix:e}});R(t.packs,a.diff),t.stateHash=a.state_hash,t.warnings=a.warnings}catch(e){console.error("set_pack_prefix failed:",e)}finally{t.busy=!1}}(a),400)}function ce(e){if(!b.value)return;const a=e.target.value;d&&clearTimeout(d),d=setTimeout(()=>{!async function(e){if(t.busy||!v.value)return;try{t.busy=!0;const a=await s({command:"rename_page",repo_url:t.repoUrl,ref:t.ref,data:{pack_name:v.value,page_name:l.node.label,new_title:e}});R(t.packs,a.diff),t.stateHash=a.state_hash,t.warnings=a.warnings}catch(e){console.error("rename_page failed:",e)}finally{t.busy=!1}}(V.value?V.value+a:a)},400)}function de(e){return mw.msg(e)}i.value=l.depth<2||D.value,e.onBeforeUnmount(()=>{c&&clearTimeout(c),d&&clearTimeout(d)});const pe=e.computed(()=>{if(!l.node.children)return[];const e=[...l.node.children],a=e=>(e||"").toLocaleLowerCase();return e.sort((e,t)=>{if("page"===e.type&&"page"!==t.type)return-1;if("page"!==e.type&&"page"===t.type)return 1;const o=a(e.label),n=a(t.label);return o<n?-1:o>n?1:0}),e});function ue(e){e.style.height="0",e.style.opacity="0",e.offsetHeight,e.style.transition="height 0.3s ease, opacity 0.3s ease",e.style.height=e.scrollHeight+"px",e.style.opacity="1"}function me(e){e.style.height=e.scrollHeight+"px",e.offsetHeight,e.style.transition="height 0.3s ease, opacity 0.3s ease",e.style.height="0",e.style.opacity="0"}return(t,n)=>{const l=e.resolveComponent("tree-node",!0);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createCommentVNode('\n    ============================================================================\n    TREE NODE LAYOUT - CARD-BASED NESTING WITH INLINE STYLES\n    ============================================================================\n    \n    ðŸŽ¯ CRITICAL SUCCESS FACTORS - WHY THIS WORKS:\n    \n    1. **INLINE STYLES ARE REQUIRED** - CSS classes were NOT working due to:\n       - MediaWiki/Codex CSS has extremely high specificity\n       - External stylesheets were being overridden\n       - Inline styles have highest specificity and can\'t be overridden\n       - âœ… Use :style="" binding in template for all visual styling\n       - âŒ DO NOT rely on CSS classes alone for layout/colors\n    \n    2. **CHILDREN MUST BE INSIDE PACK-CARD** - This creates true nesting:\n       - The .pack-card div wraps the entire pack (row + meta + children)\n       - Children render INSIDE their parent\'s card, not as siblings\n       - This creates the "recursive card nesting" visual effect\n       - Each nested pack gets its own card INSIDE the parent card\n    \n    3. **INDENTATION** - Applied via inline paddingLeft on .node-row:\n       - Formula: `paddingLeft: ${depth * 24}px`\n       - depth=0: 0px, depth=1: 24px, depth=2: 48px, etc.\n       - Applied to .node-row, NOT the .pack-card wrapper\n    \n    4. **COLOR CODING** - Inline background colors based on state:\n       - Installed: #e8f0f8 (blue)\n       - Install action: #e8f5e9 (green)\n       - Remove action: #ffebee (red)\n       - Update action: #fff8e1 (yellow)\n       - Default: #ffffff (white)\n    \n    5. **VISUAL HIERARCHY**:\n       - Border: 2px solid creates clear card boundaries\n       - Border-radius: 8px for rounded corners\n       - Box-shadow: 0 2px 4px rgba() for depth\n       - Padding: 12px inside cards for breathing room\n       - Margin-bottom: 12px between cards\n    \n    âš ï¸ MAINTENANCE NOTES:\n    - If visual changes don\'t appear, check if inline styles are present\n    - CSS classes are kept for semantic purposes but don\'t control layout\n    - Any layout-critical styling MUST be in :style="" bindings\n    - Test changes by checking if inline styles render in browser DevTools\n    \n    ============================================================================\n  '),e.createElementVNode("div",{class:e.normalizeClass(["tree-node",{"is-pack":"pack"===o.node.type,"is-page":"page"===o.node.type}]),"data-type":o.node.type,"data-action":u.value?.action||N.value,"data-installed":"pack"===o.node.type?u.value?.installed:h.value?.installed},[e.createCommentVNode(" \n        PACK CARD WRAPPER - Creates rounded rectangle container\n        âš ï¸ INLINE STYLES REQUIRED: CSS classes don't work due to MW/Codex specificity\n        - Border creates card boundary\n        - Background color shows state: blue=installed, green=install, red=remove, yellow=update\n        - Children render INSIDE this div for proper nesting\n      "),"pack"===o.node.type?(e.openBlock(),e.createElementBlock("div",{key:0,class:"pack-card","data-depth":o.depth,style:e.normalizeStyle({border:"2px solid #c8ccd1",borderRadius:"8px",padding:"12px",marginBottom:"12px",background:u.value?.installed?"#e8f0f8":"install"===u.value?.action?"#e8f5e9":"remove"===u.value?.action?"#ffebee":"update"===u.value?.action?"#fff8e1":"#ffffff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"})},[e.createCommentVNode(" \n          NODE ROW - Horizontal flexbox containing pack name, badges, editor, buttons\n          âš ï¸ INDENTATION via inline paddingLeft: depth * 24px\n          - depth=0: 0px, depth=1: 24px, depth=2: 48px, etc.\n        "),e.createElementVNode("div",{class:"node-row",style:e.normalizeStyle({paddingLeft:24*o.depth+"px"})},[e.createCommentVNode(" Toggle arrow "),p.value?(e.openBlock(),e.createElementBlock("button",{key:0,class:"toggle","aria-expanded":i.value.toString(),"aria-label":i.value?de("labkipackmanager-collapse"):de("labkipackmanager-expand"),onClick:A},e.toDisplayString(i.value?"â–¼":"â–¶"),9,M)):(e.openBlock(),e.createElementBlock("span",L)),e.createCommentVNode(" Icon "),n[3]||(n[3]=e.createElementVNode("span",{class:"node-icon"},"ðŸ“¦",-1)),e.createCommentVNode(" Name and badges "),e.createElementVNode("span",P,[e.createElementVNode("strong",{class:"label",title:o.node.label},e.toDisplayString(o.node.label),9,O),o.node.version?(e.openBlock(),e.createElementBlock("span",U,"v"+e.toDisplayString(o.node.version),1)):e.createCommentVNode("v-if",!0),u.value&&u.value.action&&"unchanged"!==u.value.action?(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(["badge",u.value.auto_selected_reason?"auto":"manual"]),title:u.value.auto_selected_reason||""},e.toDisplayString(u.value.auto_selected_reason?"Auto":"Manual"),11,$)):e.createCommentVNode("v-if",!0),B.value?(e.openBlock(),e.createElementBlock("span",H,"Update Available")):e.createCommentVNode("v-if",!0)]),e.createCommentVNode(" Pack: Inline prefix editor "),f.value?(e.openBlock(),e.createElementBlock("span",G,[n[1]||(n[1]=e.createElementVNode("span",{class:"arrow"},"â†’",-1)),n[2]||(n[2]=e.createElementVNode("span",{class:"prefix-label"},"Prefix:",-1)),e.createElementVNode("input",{class:"prefix-input",type:"text",value:g.value,placeholder:de("labkipackmanager-pack-prefix-placeholder")||"MyNamespace/MyPack",disabled:!m.value,readonly:!m.value,onInput:se},null,40,z)])):e.createCommentVNode("v-if",!0),e.createCommentVNode(" Spacer to push actions to the right "),n[4]||(n[4]=e.createElementVNode("span",{class:"spacer"},null,-1)),e.createCommentVNode(" Actions (for packs only) "),e.createElementVNode("div",j,[u.value&&null===u.value.current_version?(e.openBlock(),e.createElementBlock("div",F,[e.createVNode(e.unref(a.CdxButton),{action:"progressive",weight:"install"===u.value.action?"primary":"normal",class:e.normalizeClass({active:"install"===u.value.action}),onClick:le},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString("install"===u.value.action?"âœ“ ":"")+e.toDisplayString(de("labkipackmanager-select")),1)]),_:1},8,["weight","class"])])):e.createCommentVNode("v-if",!0),B.value?(e.openBlock(),e.createElementBlock("div",q,[e.createVNode(e.unref(a.CdxButton),{weight:"update"===u.value?.action?"primary":"normal",class:e.normalizeClass({active:"update"===u.value?.action}),onClick:ie},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString("update"===u.value?.action?"âœ“ ":"")+e.toDisplayString(de("labkipackmanager-update")),1)]),_:1},8,["weight","class"])])):e.createCommentVNode("v-if",!0),u.value&&null!==u.value.current_version?(e.openBlock(),e.createElementBlock("div",W,[e.createVNode(e.unref(a.CdxButton),{action:"destructive",weight:"remove"===u.value.action?"primary":"normal",class:e.normalizeClass({active:"remove"===u.value.action}),onClick:re},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString("remove"===u.value.action?"âœ“ ":"")+e.toDisplayString(de("labkipackmanager-remove")),1)]),_:1},8,["weight","class"])])):e.createCommentVNode("v-if",!0)])],4),e.createCommentVNode(" Description and dependencies on second row if present "),o.node.description||o.node.depends_on?.length?(e.openBlock(),e.createElementBlock("div",Y,[e.createElementVNode("div",Q,[o.node.description?(e.openBlock(),e.createElementBlock("div",J,e.toDisplayString(o.node.description),1)):e.createCommentVNode("v-if",!0),o.node.depends_on?.length?(e.openBlock(),e.createElementBlock("div",K,[e.createElementVNode("small",null,e.toDisplayString(de("labkipackmanager-depends-on"))+": "+e.toDisplayString(o.node.depends_on.join(", ")),1)])):e.createCommentVNode("v-if",!0)])])):e.createCommentVNode("v-if",!0),e.createCommentVNode(' \n          CHILDREN CONTAINER - CRITICAL: Nested packs/pages render INSIDE parent card\n          âš ï¸ This is what creates the "recursive card nesting" effect\n          - Children are inside the .pack-card div, not siblings\n          - Each child pack creates its own card, nested inside this one\n          - Visual indentation via left border + paddingLeft\n        '),e.createVNode(e.Transition,{name:"children",onEnter:ue,onLeave:me},{default:e.withCtx(()=>[i.value&&p.value?(e.openBlock(),e.createElementBlock("div",Z,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(pe.value,a=>(e.openBlock(),e.createBlock(l,{key:a.id,node:a,depth:o.depth+1,"parent-pack-name":k.value,onSetPackAction:n[0]||(n[0]=e=>t.$emit("set-pack-action",e))},null,8,["node","depth","parent-pack-name"]))),128))])):e.createCommentVNode("v-if",!0)]),_:1})],12,I)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createCommentVNode(" \n        PAGE ROW - Simple horizontal layout for pages (no card wrapper)\n        âš ï¸ INLINE STYLES REQUIRED for background colors\n        - Color matches parent pack's action state\n        - Renders inside parent's .children container\n        - No nested children (pages don't contain other items)\n      "),e.createElementVNode("div",{class:"page-row",style:e.normalizeStyle({padding:"8px 12px",background:h.value?.installed?"rgba(232, 240, 248, 0.4)":"install"===N.value?"rgba(232, 245, 233, 0.6)":"remove"===N.value?"rgba(255, 235, 238, 0.6)":"rgba(255, 255, 255, 0.5)",borderRadius:"6px",marginBottom:"6px"})},[n[6]||(n[6]=e.createElementVNode("span",{class:"toggle-spacer"},null,-1)),n[7]||(n[7]=e.createElementVNode("span",{class:"node-icon"},"ðŸ“„",-1)),e.createElementVNode("strong",X,e.toDisplayString(o.node.label),1),e.createCommentVNode(" Page rename editor "),w.value?(e.openBlock(),e.createElementBlock("span",ee,[n[5]||(n[5]=e.createElementVNode("span",{class:"arrow"},"â†’",-1)),_.value?(e.openBlock(),e.createElementBlock("span",ae,e.toDisplayString(V.value),1)):e.createCommentVNode("v-if",!0),e.createElementVNode("input",{class:e.normalizeClass(["page-input",{"has-collision":C.value}]),type:"text",value:E.value,placeholder:de("labkipackmanager-page-title-placeholder")||"PageTitle",disabled:!b.value,readonly:!b.value,onInput:ce,"aria-invalid":C.value?"true":"false","aria-describedby":C.value?S.value:void 0},null,42,te),C.value?(e.openBlock(),e.createElementBlock("span",{key:1,class:"collision-icon",id:S.value,title:x.value},"âš ï¸",8,oe)):e.createCommentVNode("v-if",!0)])):e.createCommentVNode("v-if",!0)],4)],2112))],10,T)],2112)}},__file:"resources/src/ui/TreeNode.vue"};const le={class:"hierarchy-tree-container"},re={key:0,class:"no-hierarchy"},ie={key:1,class:"tree-content"},se={class:"tree-stats"},ce={class:"tree-nodes labki-tree"};var de={__name:"HierarchyTree",props:{hierarchy:Object},setup(a){async function o(e){await async function(e,a){if(t.busy)return;try{t.busy=!0,console.log(`[sendCommand] Sending ${e}:`,a);const o=await s({command:e,repo_url:t.repoUrl,ref:t.ref,data:a});console.log("[sendCommand] Response diff:",o.diff),console.log("[sendCommand] Pack state before merge:",a.pack_name?t.packs[a.pack_name]:"N/A"),R(t.packs,o.diff),t.stateHash=o.state_hash,t.warnings=o.warnings,console.log("[sendCommand] Pack state after merge:",a.pack_name?t.packs[a.pack_name]:"N/A")}catch(e){console.error("Command failed:",e)}finally{t.busy=!1}}("set_pack_action",{pack_name:e.pack_name,action:e.action})}function n(e){return mw.msg(e)}return(t,l)=>(e.openBlock(),e.createElementBlock("div",le,[e.createElementVNode("h3",null,e.toDisplayString(n("labkipackmanager-hierarchy-title")),1),a.hierarchy?(e.openBlock(),e.createElementBlock("div",ie,[e.createElementVNode("div",se,[e.createElementVNode("span",null,e.toDisplayString(n("labkipackmanager-pack-count"))+": "+e.toDisplayString(a.hierarchy.meta.pack_count),1),e.createElementVNode("span",null,e.toDisplayString(n("labkipackmanager-page-count"))+": "+e.toDisplayString(a.hierarchy.meta.page_count),1)]),e.createElementVNode("div",ce,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.hierarchy.root_nodes,a=>(e.openBlock(),e.createBlock(ne,{key:a.id,node:a,depth:0,onSetPackAction:o},null,8,["node"]))),128))])])):(e.openBlock(),e.createElementBlock("div",re,[e.createElementVNode("p",null,e.toDisplayString(n("labkipackmanager-no-hierarchy-loaded")),1)]))]))},__scopeId:"data-v-adb05fca",__file:"resources/src/ui/HierarchyTree.vue"};const pe={class:"details-panel"},ue={class:"panel-content"},me={key:0,class:"warnings-section"},fe={key:1,class:"selected-packs-section"},ge={class:"packs-list"},ke={class:"pack-header"},ve=["title"],ye={key:1,class:"pack-badge manual"},he={class:"pack-details"},be={key:0},we={key:1},Ne={key:2},_e={key:3},Ve={key:2,class:"no-selection"},Ee={key:3,class:"state-info"},Ce={class:"action-buttons"};var xe={__name:"DetailsPanel",setup(o){const n=e.ref(""),l=e.ref(""),r=e.computed(()=>{const e=[];for(const[a,o]of Object.entries(t.packs))o.action&&"unchanged"!==o.action&&e.push({name:a,state:o,pageCount:Object.keys(o.pages||{}).length});return e});async function i(){if(!t.busy)try{t.busy=!0,n.value="",l.value="";const e=await s({command:"apply",repo_url:t.repoUrl,ref:t.ref,data:{packs:t.packs,state_hash:t.stateHash}});R(t.packs,e.diff),t.stateHash=e.state_hash,t.warnings=e.warnings,e.operation?.operation_id?n.value=p("labkipackmanager-apply-success-with-id").replace("$1",e.operation.operation_id):n.value=p("labkipackmanager-apply-success")}catch(e){l.value=e instanceof Error?e.message:String(e)}finally{t.busy=!1}}async function c(){if(!t.busy)try{t.busy=!0,n.value="",l.value="";const e=await s({command:"refresh",repo_url:t.repoUrl,ref:t.ref,data:{}});R(t.packs,e.diff),t.stateHash=e.state_hash,t.warnings=e.warnings,n.value=p("labkipackmanager-refresh-success")}catch(e){l.value=e instanceof Error?e.message:String(e)}finally{t.busy=!1}}async function d(){if(!t.busy&&confirm(p("labkipackmanager-clear-confirm")))try{t.busy=!0,n.value="",l.value="",t.packs={},t.warnings=[];const e=await s({command:"clear",repo_url:t.repoUrl,ref:t.ref,data:{}});t.packs=e.diff,t.stateHash=e.state_hash,t.warnings=e.warnings,n.value=p("labkipackmanager-clear-success")}catch(e){l.value=e instanceof Error?e.message:String(e)}finally{t.busy=!1}}function p(e){return mw.msg(e)}return(o,s)=>(e.openBlock(),e.createElementBlock("div",pe,[e.createElementVNode("h3",null,e.toDisplayString(p("labkipackmanager-details-title")),1),e.createElementVNode("div",ue,[e.createCommentVNode(" Warnings Section "),e.unref(t).warnings.length>0?(e.openBlock(),e.createElementBlock("div",me,[e.createElementVNode("h4",null,e.toDisplayString(p("labkipackmanager-warnings")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).warnings,(t,o)=>(e.openBlock(),e.createBlock(e.unref(a.CdxMessage),{key:o,type:"warning",inline:!0},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t),1)]),_:2},1024))),128))])):e.createCommentVNode("v-if",!0),e.createCommentVNode(" Selected Packs Section "),r.value.length>0?(e.openBlock(),e.createElementBlock("div",fe,[e.createElementVNode("h4",null,e.toDisplayString(p("labkipackmanager-selected-packs")),1),e.createElementVNode("div",ge,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,a=>(e.openBlock(),e.createElementBlock("div",{key:a.name,class:"pack-item"},[e.createElementVNode("div",ke,[e.createElementVNode("strong",null,e.toDisplayString(a.name),1),a.state.auto_selected_reason?(e.openBlock(),e.createElementBlock("span",{key:0,class:"pack-badge auto",title:a.state.auto_selected_reason},e.toDisplayString(p("labkipackmanager-auto-selected")),9,ve)):(e.openBlock(),e.createElementBlock("span",ye,e.toDisplayString(p("labkipackmanager-manually-selected")),1))]),e.createElementVNode("div",he,[a.state.action?(e.openBlock(),e.createElementBlock("div",be,[e.createElementVNode("small",null,e.toDisplayString(p("labkipackmanager-action"))+": "+e.toDisplayString(a.state.action),1)])):e.createCommentVNode("v-if",!0),a.state.target_version?(e.openBlock(),e.createElementBlock("div",we,[e.createElementVNode("small",null,e.toDisplayString(p("labkipackmanager-version"))+": "+e.toDisplayString(a.state.target_version),1)])):e.createCommentVNode("v-if",!0),a.state.prefix?(e.openBlock(),e.createElementBlock("div",Ne,[e.createElementVNode("small",null,e.toDisplayString(p("labkipackmanager-pack-prefix"))+": "+e.toDisplayString(a.state.prefix),1)])):e.createCommentVNode("v-if",!0),a.pageCount>0?(e.openBlock(),e.createElementBlock("div",_e,[e.createElementVNode("small",null,e.toDisplayString(p("labkipackmanager-pages"))+": "+e.toDisplayString(a.pageCount),1)])):e.createCommentVNode("v-if",!0)])]))),128))])])):(e.openBlock(),e.createElementBlock("div",Ve,[e.createElementVNode("p",null,e.toDisplayString(p("labkipackmanager-no-packs-selected")),1)])),e.createCommentVNode(" State Hash (Debug) "),e.unref(t).stateHash?(e.openBlock(),e.createElementBlock("div",Ee,[e.createElementVNode("small",null,[e.createTextVNode(e.toDisplayString(p("labkipackmanager-state-hash"))+": ",1),e.createElementVNode("code",null,e.toDisplayString(e.unref(t).stateHash),1)])])):e.createCommentVNode("v-if",!0),e.createCommentVNode(" Action Buttons "),e.createElementVNode("div",Ce,[e.createVNode(e.unref(a.CdxButton),{action:"progressive",weight:"primary",disabled:e.unref(t).busy||0===r.value.length,onClick:i},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(p("labkipackmanager-apply")),1)]),_:1},8,["disabled"]),e.createVNode(e.unref(a.CdxButton),{action:"default",disabled:e.unref(t).busy,onClick:c},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(p("labkipackmanager-refresh")),1)]),_:1},8,["disabled"]),e.createVNode(e.unref(a.CdxButton),{action:"destructive",weight:"quiet",disabled:e.unref(t).busy,onClick:d},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(p("labkipackmanager-clear")),1)]),_:1},8,["disabled"])]),e.createCommentVNode(" Operation Status "),n.value?(e.openBlock(),e.createBlock(e.unref(a.CdxMessage),{key:4,type:"success",inline:!0},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.value),1)]),_:1})):e.createCommentVNode("v-if",!0),l.value?(e.openBlock(),e.createBlock(e.unref(a.CdxMessage),{key:5,type:"error",inline:!0},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.value),1)]),_:1})):e.createCommentVNode("v-if",!0)])]))},__scopeId:"data-v-348c6e2c",__file:"resources/src/ui/DetailsPanel.vue"};const Se={class:"labki-pack-manager-app"},Be={class:"app-header"},Re={class:"app-description"},De={key:0,class:"loading-overlay"},Ae={class:"loading-spinner"},Te={class:"app-main"};var Ie={__name:"App",setup(a){function o(e){return mw.msg(e)}return e.onMounted(()=>{console.log("Labki Pack Manager initialized")}),(a,n)=>(e.openBlock(),e.createElementBlock("div",Se,[e.createElementVNode("header",Be,[e.createElementVNode("h1",null,e.toDisplayString(o("labkipackmanager-special-title")),1),e.createElementVNode("p",Re,e.toDisplayString(o("labkipackmanager-special-description")),1)]),e.unref(t).busy?(e.openBlock(),e.createElementBlock("div",De,[e.createElementVNode("div",Ae,e.toDisplayString(o("labkipackmanager-loading"))+"... ",1)])):e.createCommentVNode("v-if",!0),e.createElementVNode("main",Te,[e.createVNode(V),e.unref(t).repoUrl&&e.unref(t).ref?(e.openBlock(),e.createBlock(B,{key:0,"mermaid-src":e.unref(t).mermaidSrc},null,8,["mermaid-src"])):e.createCommentVNode("v-if",!0),e.unref(t).repoUrl&&e.unref(t).ref?(e.openBlock(),e.createBlock(de,{key:1,hierarchy:e.unref(t).hierarchy},null,8,["hierarchy"])):e.createCommentVNode("v-if",!0),e.unref(t).repoUrl&&e.unref(t).ref?(e.openBlock(),e.createBlock(xe,{key:2})):e.createCommentVNode("v-if",!0)])]))}};Ie.__scopeId="data-v-23151fc9",Ie.__file="resources/src/ui/App.vue",console.log("Labki Pack Manager: main.ts loading..."),console.log("Labki Pack Manager: imports complete"),console.log("Labki Pack Manager: Checking MediaWiki environment..."),"undefined"!=typeof mw&&mw.loader?(console.log("Labki Pack Manager: MediaWiki environment available, starting bootstrap"),console.log("Labki Pack Manager: bootstrap called"),mw.loader.using(["vue","mediawiki.api","@wikimedia/codex","codex-styles"]).then(()=>{console.log("Labki Pack Manager: All modules loaded, initializing app"),function(){console.log("Labki Pack Manager: initApp called");const a=document.getElementById("labki-pack-manager-root");a?(console.log("Labki Pack Manager: Root element found, creating app"),e.createApp(Ie).mount(a),console.log("Labki Pack Manager: Application mounted")):console.error("Labki Pack Manager: Root element not found")}()}).catch(e=>{console.error("Labki Pack Manager: Failed to load required modules",e)})):console.error("Labki Pack Manager: MediaWiki environment not available")}(Vue,Codex);
//# sourceMappingURL=app.bundle.js.map
